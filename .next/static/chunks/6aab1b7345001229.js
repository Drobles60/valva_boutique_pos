(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10708,e=>{"use strict";var a=e.i(29511),t=e.i(58138),s=e.i(34676),r=t.forwardRef((e,t)=>(0,a.jsx)(s.Primitive.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));r.displayName="Label";var l=e.i(47163);function n({className:e,...t}){return(0,a.jsx)(r,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>n],10708)},94179,e=>{"use strict";var a=e.i(29511),t=e.i(84739),s=e.i(94237),r=e.i(47163);let l=(0,s.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,asChild:n=!1,...i}){let o=n?t.Slot:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:(0,r.cn)(l({variant:s}),e),...i})}e.s(["Badge",()=>n])},47627,e=>{"use strict";var a=e.i(29511),t=e.i(47163);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,t.cn)("w-full caption-bottom text-sm",e),...s})})}function r({className:e,...s}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,t.cn)("[&_tr]:border-b",e),...s})}function l({className:e,...s}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,t.cn)("[&_tr:last-child]:border-0",e),...s})}function n({className:e,...s}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,t.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function i({className:e,...s}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,t.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function o({className:e,...s}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,t.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>l,"TableCell",()=>o,"TableHead",()=>i,"TableHeader",()=>r,"TableRow",()=>n])},65739,e=>{"use strict";let a=(0,e.i(10965).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>a],65739)},82732,e=>{"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>a])},13637,e=>{"use strict";let a=(0,e.i(10965).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>a],13637)},64626,e=>{"use strict";let a=(0,e.i(10965).default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);e.s(["TrendingDown",()=>a],64626)},69591,e=>{"use strict";var a=e.i(29511),t=e.i(58138),s=e.i(16755),r=e.i(70065),l=e.i(67881),n=e.i(10708),i=e.i(23750),o=e.i(47627),d=e.i(94179),c=e.i(13637),x=e.i(62412),m=e.i(84675),u=e.i(65739),h=e.i(64626),p=e.i(60313),f=e.i(68451);function j(){let e=(0,s.useRouter)(),[j,b]=(0,t.useState)(""),[g,v]=(0,t.useState)(""),[y,C]=(0,t.useState)(null),[N,w]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=new Date;b(new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0]),v(e.toISOString().split("T")[0])},[]);let T=async()=>{if(j&&g){w(!0);try{let e=await fetch(`/api/reportes/financieros/flujo-caja?fechaInicio=${j}&fechaFin=${g}`),a=await e.json();C(a)}catch(e){console.error("Error cargando reporte:",e),alert("Error al cargar el reporte")}finally{w(!1)}}};return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>e.back(),children:(0,a.jsx)(m.ArrowLeft,{className:"h-5 w-5"})}),(0,a.jsx)(p.SidebarToggle,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Flujo de Caja"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Movimientos de efectivo con balance acumulado"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>{if(!y)return;let e={headers:["Fecha","Tipo","Concepto","Entrada","Salida","Balance"],rows:y.movimientos.map(e=>[new Date(e.fecha).toLocaleDateString("es-MX"),"entrada"===e.tipo?"Entrada":"Salida",e.concepto,"entrada"===e.tipo?(0,f.formatCurrency)(e.monto):"-","salida"===e.tipo?(0,f.formatCurrency)(e.monto):"-",(0,f.formatCurrency)(e.balance)])},a={title:"Flujo de Caja",subtitle:"Movimientos de Efectivo Detallados",period:`${j} a ${g}`,orientation:"landscape",companyInfo:{name:"Valva Boutique",address:"Sistema POS",phone:"Reporte Financiero"}};(0,f.exportToPDF)(e,a)},disabled:!y,children:[(0,a.jsx)(c.Download,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,a.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>{if(!y)return;let e={headers:["Fecha","Tipo","Concepto","Entrada","Salida","Balance"],rows:y.movimientos.map(e=>[new Date(e.fecha).toLocaleDateString("es-MX"),"entrada"===e.tipo?"Entrada":"Salida",e.concepto,"entrada"===e.tipo?e.monto:0,"salida"===e.tipo?e.monto:0,e.balance])};(0,f.exportToExcel)(e,{title:"Flujo de Caja",period:`${j} a ${g}`,sheetName:"Flujo de Caja"})},disabled:!y,children:[(0,a.jsx)(c.Download,{className:"mr-2 h-4 w-4"}),"Excel"]})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{children:[(0,a.jsx)(r.CardTitle,{children:"Filtros del Reporte"}),(0,a.jsx)(r.CardDescription,{children:"Seleccione el perÃ­odo a analizar"})]}),(0,a.jsx)(r.CardContent,{children:(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"fecha-inicio",children:"Fecha Inicio"}),(0,a.jsx)(i.Input,{id:"fecha-inicio",type:"date",value:j,onChange:e=>b(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"fecha-fin",children:"Fecha Fin"}),(0,a.jsx)(i.Input,{id:"fecha-fin",type:"date",value:g,onChange:e=>v(e.target.value)})]}),(0,a.jsx)("div",{className:"flex items-end md:col-span-2",children:(0,a.jsxs)(l.Button,{className:"w-full",onClick:T,disabled:N,children:[(0,a.jsx)(x.FileText,{className:"mr-2 h-4 w-4"}),N?"Generando...":"Generar Reporte"]})})]})})]}),y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Saldo Inicial"}),(0,a.jsx)(u.TrendingUp,{className:"h-4 w-4 text-blue-600"})]}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(0,f.formatCurrency)(y.saldoInicial)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Al inicio del perÃ­odo"})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Total Entradas"}),(0,a.jsx)(u.TrendingUp,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(0,f.formatCurrency)(y.totalEntradas)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Ingresos de efectivo"})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Total Salidas"}),(0,a.jsx)(h.TrendingDown,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(0,f.formatCurrency)(y.totalSalidas)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Egresos de efectivo"})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Saldo Final"}),(0,a.jsx)(u.TrendingUp,{className:"h-4 w-4 text-purple-600"})]}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsx)("div",{className:`text-2xl font-bold ${y.saldoFinal>=0?"text-purple-600":"text-red-600"}`,children:(0,f.formatCurrency)(y.saldoFinal)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Balance al cierre"})]})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{children:[(0,a.jsx)(r.CardTitle,{children:"Detalle de Movimientos"}),(0,a.jsxs)(r.CardDescription,{children:["Historial completo de entradas y salidas de efectivo (",y.movimientos.length," movimientos)"]})]}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(o.Table,{children:[(0,a.jsx)(o.TableHeader,{children:(0,a.jsxs)(o.TableRow,{children:[(0,a.jsx)(o.TableHead,{children:"Fecha"}),(0,a.jsx)(o.TableHead,{children:"Tipo"}),(0,a.jsx)(o.TableHead,{children:"Concepto"}),(0,a.jsx)(o.TableHead,{className:"text-right",children:"Entrada"}),(0,a.jsx)(o.TableHead,{className:"text-right",children:"Salida"}),(0,a.jsx)(o.TableHead,{className:"text-right",children:"Balance"})]})}),(0,a.jsx)(o.TableBody,{children:0===y.movimientos.length?(0,a.jsx)(o.TableRow,{children:(0,a.jsx)(o.TableCell,{colSpan:6,className:"text-center text-muted-foreground",children:"No hay movimientos en el perÃ­odo seleccionado"})}):y.movimientos.map((e,t)=>(0,a.jsxs)(o.TableRow,{className:t%2==0?"bg-muted/50":"",children:[(0,a.jsx)(o.TableCell,{className:"font-medium",children:new Date(e.fecha).toLocaleDateString("es-MX")}),(0,a.jsx)(o.TableCell,{children:(0,a.jsx)(d.Badge,{variant:"entrada"===e.tipo?"default":"destructive",className:"entrada"===e.tipo?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:"entrada"===e.tipo?"Entrada":"Salida"})}),(0,a.jsx)(o.TableCell,{children:e.concepto}),(0,a.jsx)(o.TableCell,{className:"text-right font-semibold text-green-600",children:"entrada"===e.tipo?(0,f.formatCurrency)(e.monto):"-"}),(0,a.jsx)(o.TableCell,{className:"text-right font-semibold text-red-600",children:"salida"===e.tipo?(0,f.formatCurrency)(e.monto):"-"}),(0,a.jsx)(o.TableCell,{className:"text-right font-bold",children:(0,f.formatCurrency)(e.balance)})]},t))})]})})})]}),(0,a.jsxs)(r.Card,{className:"bg-blue-50",children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsx)(r.CardTitle,{className:"text-blue-900",children:"ðŸ’¡ InterpretaciÃ³n del Flujo de Caja"})}),(0,a.jsxs)(r.CardContent,{className:"text-sm text-blue-800 space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Saldo Positivo:"})," Indica que tienes mÃ¡s entradas que salidas de efectivo, lo cual es saludable para el negocio."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Saldo Negativo:"})," Significa mÃ¡s egresos que ingresos. Revisa gastos y considera estrategias de cobro."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Balance Acumulado:"})," Muestra cÃ³mo va evolucionando tu efectivo dÃ­a a dÃ­a."]})]})]})]}),!y&&!N&&(0,a.jsx)(r.Card,{children:(0,a.jsxs)(r.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(x.FileText,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Genere el reporte"}),(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:'Seleccione las fechas y haga clic en "Generar Reporte" para ver el flujo de caja'})]})})]})}e.s(["FlujoCajaContent",()=>j])},66997,e=>{e.v(a=>Promise.all(["static/chunks/cf4fc1e20e39d4cb.js"].map(a=>e.l(a))).then(()=>a(21487)))},95732,e=>{e.v(a=>Promise.all(["static/chunks/204bb282bc57b968.js"].map(a=>e.l(a))).then(()=>a(1983)))},23548,e=>{e.v(a=>Promise.all(["static/chunks/cc5e7d8e69503b6d.js"].map(a=>e.l(a))).then(()=>a(29685)))}]);