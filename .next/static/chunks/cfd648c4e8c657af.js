(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36446,e=>{"use strict";var a=e.i(29511),s=e.i(58138),t=e.i(70065),r=e.i(67881),n=e.i(23750),l=e.i(10708),o=e.i(94179),i=e.i(47627),d=e.i(30374),c=e.i(62870),m=e.i(84762),x=e.i(5576),h=e.i(60039),u=e.i(89457);let p=(0,e.i(10965).default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var j=e.i(87524),f=e.i(2870),g=e.i(60313),b=e.i(22036),N=e.i(47163),v=e.i(71435);function C(){let e,C,[y,w]=(0,s.useState)([]),[T,F]=(0,s.useState)(null),[S,D]=(0,s.useState)([]),[_,$]=(0,s.useState)(null),[H,E]=(0,s.useState)(""),[P,A]=(0,s.useState)(""),[B,z]=(0,s.useState)(""),[I,k]=(0,s.useState)(!1),[L,M]=(0,s.useState)(""),[R,O]=(0,s.useState)(""),[V,U]=(0,s.useState)(!1),[q,J]=(0,s.useState)(""),[G,K]=(0,s.useState)(""),[W,Q]=(0,s.useState)(""),[X,Y]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(!1),[ea,es]=(0,s.useState)(!1),[et,er]=(0,s.useState)(!1),[en,el]=(0,s.useState)(!1),[eo,ei]=(0,s.useState)(!1),[ed,ec]=(0,s.useState)([]),[em,ex]=(0,s.useState)([]),[eh,eu]=(0,s.useState)(null),[ep,ej]=(0,s.useState)({monto:"",metodoPago:"efectivo",referencia:"",notas:""}),[ef,eg]=(0,s.useState)({monto:"",metodoPago:"efectivo",referencia:"",notas:""});(0,s.useEffect)(()=>{eb(),eN()},[]),(0,s.useEffect)(()=>{eb(),eN()},[]);let eb=async(e,a)=>{try{Y(!0);let s="/api/cuentas-por-cobrar",t=new URLSearchParams;e&&t.append("fechaInicio",e),a&&t.append("fechaFin",a),t.toString()&&(s+=`?${t.toString()}`);let r=await fetch(s),n=await r.json();if(!r.ok)throw Error(n.error||"Error al cargar facturas");w(n.data||[])}catch(e){console.error("Error al cargar facturas:",e),b.toast.error("Error al cargar facturas",{description:e.message})}finally{Y(!1)}},eN=async()=>{try{let e=await fetch("/api/clientes/cuentas-por-cobrar"),a=await e.json();if(!e.ok)throw Error(a.error||"Error al cargar clientes");D(a.data||[])}catch(e){console.error("Error al cargar clientes:",e)}},ev=async e=>{try{let a=await fetch(`/api/cuentas-por-cobrar/${e}/abonos`),s=await a.json();if(!a.ok)throw Error(s.error||"Error al cargar abonos");ec(s.data.abonos||[])}catch(e){console.error("Error al cargar abonos:",e),b.toast.error("Error al cargar historial",{description:e.message})}},eC=async(e,a,s)=>{try{let t=`/api/clientes/${e}/abonos`,r=new URLSearchParams;a&&r.append("fechaInicio",a),s&&r.append("fechaFin",s),r.toString()&&(t+=`?${r.toString()}`);let n=await fetch(t),l=await n.json();if(!n.ok)throw Error(l.error||"Error al cargar historial del cliente");ec(l.data.abonos||[]),eu(l.data.resumen||null)}catch(e){console.error("Error al cargar historial del cliente:",e),b.toast.error("Error al cargar historial del cliente",{description:e.message})}},ey=async e=>{if(e.preventDefault(),!T)return void b.toast.error("Error",{description:"No se ha seleccionado una factura"});let a=Number.parseFloat(ep.monto),s=T.saldo_pendiente;if(a<=0||a>s)return void b.toast.error("Monto inválido",{description:`El monto debe ser mayor a 0 y no puede exceder el saldo pendiente de $${(0,N.formatCurrency)(s)}`});try{Y(!0);let e=localStorage.getItem("user"),s=e?JSON.parse(e):null,t={monto:a,metodo_pago:ep.metodoPago,referencia_transferencia:ep.referencia?.trim()||null,notas:ep.notas?.trim()||null,usuario_id:s?.id||null},r=await fetch(`/api/cuentas-por-cobrar/${T.id}/abonos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await r.json();if(!r.ok)throw Error(n.error||"Error al registrar abono");b.toast.success("¡Abono registrado!",{description:`Se registr\xf3 un abono de $${(0,N.formatCurrency)(a)} para la factura #${T.numero_venta}`}),await eb(),eD()}catch(e){console.error("Error al registrar abono:",e),b.toast.error("Error al registrar abono",{description:e.message})}finally{Y(!1)}},ew=async e=>{if(e.preventDefault(),!_)return void b.toast.error("Error",{description:"No se ha seleccionado un cliente"});let a=Number.parseFloat(ef.monto),s=_.saldo_pendiente;if(a<=0||a>s)return void b.toast.error("Monto inválido",{description:`El monto debe ser mayor a 0 y no puede exceder el saldo pendiente de $${(0,N.formatCurrency)(s)}`});try{Y(!0);let e=localStorage.getItem("user"),s=e?JSON.parse(e):null,t={monto:a,metodo_pago:ef.metodoPago,referencia_transferencia:ef.referencia?.trim()||null,notas:ef.notas?.trim()||null,usuario_id:s?.id||null},r=await fetch(`/api/clientes/${_.id}/abonos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await r.json();if(!r.ok)throw Error(n.error||"Error al registrar abono");let l=n.data.detalle||[];ex(l);let o=l.map(e=>`#${e.numero_venta}`).join(", ");b.toast.success("¡Abono distribuido exitosamente!",{description:`Se distribuyeron $${(0,N.formatCurrency)(n.data.monto_aplicado)} entre ${n.data.cuentas_afectadas} factura(s): ${o}`}),await eb(),await eN(),e_()}catch(e){console.error("Error al registrar abono:",e),b.toast.error("Error al registrar abono",{description:e.message})}finally{Y(!1)}},eT=async e=>{F(e),ee(!0)},eF=async e=>{F(e),await ev(e.id),er(!0)},eS=async e=>{$(e),await eC(e.id),el(!0)},eD=()=>{ee(!1),F(null),ej({monto:"",metodoPago:"efectivo",referencia:"",notas:""})},e_=()=>{es(!1),$(null),E(""),ex([]),eg({monto:"",metodoPago:"efectivo",referencia:"",notas:""})},e$=y.filter(e=>(0,N.normalizeText)(e.numero_venta).includes((0,N.normalizeText)(W))||(0,N.normalizeText)(e.cliente_nombre).includes((0,N.normalizeText)(W))||(0,N.normalizeText)(e.cliente_identificacion).includes((0,N.normalizeText)(W))),eH=S.filter(e=>(0,N.normalizeText)(e.nombre).includes((0,N.normalizeText)(H))||(0,N.normalizeText)(e.identificacion).includes((0,N.normalizeText)(H))),eE=y.length,eP=y.filter(e=>e.saldo_pendiente>0).length,eA=y.reduce((e,a)=>e+Number(a.saldo_pendiente),0),eB=y.reduce((e,a)=>e+(Number(a.total_abonado)||0),0);return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(g.SidebarToggle,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Cuentas por Cobrar"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Gestión de ventas a crédito y abonos"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(r.Button,{onClick:()=>{es(!0)},size:"lg",children:[(0,a.jsx)(f.Users,{className:"h-4 w-4 mr-2"}),"Abonar a Cliente"]}),(0,a.jsxs)(r.Button,{onClick:()=>ei(!0),variant:"outline",size:"lg",children:[(0,a.jsx)(p,{className:"h-4 w-4 mr-2"}),"Ver Historial"]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Total Facturas"}),(0,a.jsx)(u.CreditCard,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(t.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:eE})})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Facturas Pendientes"}),(0,a.jsx)(j.AlertCircle,{className:"h-4 w-4 text-[#D4AF37]"})]}),(0,a.jsx)(t.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-[#D4AF37]",children:eP})})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Total Abonado"}),(0,a.jsx)(h.DollarSign,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsx)(t.CardContent,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",(0,N.formatCurrency)(eB)]})})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Saldo Pendiente"}),(0,a.jsx)(h.DollarSign,{className:"h-4 w-4 text-[#D4AF37]"})]}),(0,a.jsx)(t.CardContent,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold text-[#D4AF37]",children:["$",(0,N.formatCurrency)(eA)]})})]})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsx)(t.CardHeader,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(x.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.Input,{className:"pl-9",placeholder:"Buscar por factura, cliente o identificación...",value:W,onChange:e=>Q(e.target.value)})]}),(0,a.jsx)(r.Button,{type:"button",variant:V?"default":"outline",onClick:()=>U(!V),className:"whitespace-nowrap",children:V?"Ocultar Fechas":"Buscar por Fechas"})]}),V&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-md bg-muted/50",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"facturasFechaInicio",children:"Fecha Inicio"}),(0,a.jsx)(n.Input,{id:"facturasFechaInicio",type:"date",value:q,onChange:e=>J(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"facturasFechaFin",children:"Fecha Fin"}),(0,a.jsx)(n.Input,{id:"facturasFechaFin",type:"date",value:G,onChange:e=>K(e.target.value)})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex gap-2 justify-end",children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>{J(""),K(""),eb()},children:"Limpiar Filtros"}),(0,a.jsx)(r.Button,{type:"button",onClick:()=>eb(q,G),children:"Aplicar Filtro"})]})]})]})}),(0,a.jsx)(t.CardContent,{className:"overflow-x-auto",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Factura"}),(0,a.jsx)(i.TableHead,{children:"Cliente"}),(0,a.jsx)(i.TableHead,{className:"hidden lg:table-cell",children:"Fecha"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Monto Total"}),(0,a.jsx)(i.TableHead,{className:"text-right hidden md:table-cell",children:"Abonado"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Pendiente"}),(0,a.jsx)(i.TableHead,{className:"hidden xl:table-cell",children:"Vencimiento"}),(0,a.jsx)(i.TableHead,{children:"Estado"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,a.jsx)(i.TableBody,{children:X&&0===y.length?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"Cargando facturas..."})}):0===e$.length?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No se encontraron facturas"})}):e$.map(e=>{let s=e.saldo_pendiente,t=s>0?"pendiente":"pagada",n=s<0,l=Math.ceil((new Date(e.fecha_vencimiento).getTime()-new Date().getTime())/864e5),d=l<0&&"pendiente"===t,c=l>=0&&l<=7&&"pendiente"===t;return(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{children:(0,a.jsxs)(o.Badge,{variant:"outline",children:["#",e.numero_venta]})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.cliente_nombre}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.cliente_identificacion})]})}),(0,a.jsx)(i.TableCell,{className:"hidden lg:table-cell text-sm",children:new Date(e.fecha_venta).toLocaleDateString("es-EC")}),(0,a.jsxs)(i.TableCell,{className:"text-right font-medium",children:["$",(0,N.formatCurrency)(e.monto_total)]}),(0,a.jsxs)(i.TableCell,{className:"text-right text-green-600 font-medium hidden md:table-cell",children:["$",(0,N.formatCurrency)(e.total_abonado)]}),(0,a.jsx)(i.TableCell,{className:"text-right",children:n?(0,a.jsxs)("span",{className:"text-blue-600 font-medium",title:"Saldo a favor del cliente",children:["-$",(0,N.formatCurrency)(Math.abs(s))]}):(0,a.jsxs)("span",{className:s>0?"font-semibold text-[#D4AF37]":"text-muted-foreground",children:["$",(0,N.formatCurrency)(s)]})}),(0,a.jsx)(i.TableCell,{className:"hidden xl:table-cell text-sm",children:d?(0,a.jsxs)("span",{className:"text-destructive font-medium",children:["Vencida (",Math.abs(l)," días)"]}):c?(0,a.jsxs)("span",{className:"text-[#D4AF37] font-medium",children:[l," días"]}):"pagada"===t?(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"}):(0,a.jsxs)("span",{className:"text-muted-foreground",children:[l," días"]})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(o.Badge,{variant:"pagada"===t?"default":d?"destructive":"secondary",children:"pagada"===t?"Pagada":d?"Vencida":"Pendiente"})}),(0,a.jsx)(i.TableCell,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-1",children:["pendiente"===t&&(0,a.jsxs)(r.Button,{variant:"default",size:"sm",onClick:()=>eT(e),disabled:X,children:[(0,a.jsx)(h.DollarSign,{className:"h-4 w-4 mr-1"}),"Abonar"]}),(0,a.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>eF(e),title:"Ver historial de abonos",children:(0,a.jsx)(p,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]}),(0,a.jsx)(d.Dialog,{open:Z,onOpenChange:ee,children:(0,a.jsxs)(d.DialogContent,{className:"max-w-lg",children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Abonar a Factura"}),(0,a.jsxs)(d.DialogDescription,{children:["Factura: #",T?.numero_venta,(0,a.jsx)("br",{}),"Cliente: ",T?.cliente_nombre]})]}),(0,a.jsxs)("form",{onSubmit:ey,children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsx)(t.Card,{children:(0,a.jsx)(t.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Total"}),(0,a.jsxs)("p",{className:"font-semibold",children:["$",(0,N.formatCurrency)(T?.monto_total||0)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Abonado"}),(0,a.jsxs)("p",{className:"font-semibold text-green-600",children:["$",(0,N.formatCurrency)(T?.total_abonado||0)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Pendiente"}),(0,a.jsxs)("p",{className:"font-semibold text-[#D4AF37]",children:["$",(0,N.formatCurrency)(T?.saldo_pendiente||0)]})]})]})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"montoIndividual",children:"Monto del Abono *"}),(0,a.jsx)(n.Input,{id:"montoIndividual",type:"text",value:ep.monto?(0,N.formatCurrency)(ep.monto):"",onChange:e=>{let a=e.target.value.replace(/\./g,"").replace(/[^0-9]/g,""),s=Number.parseFloat(a)||0,t=T?.saldo_pendiente||0;s<=t?ej({...ep,monto:a}):(ej({...ep,monto:t.toString()}),b.toast.error("Monto excedido",{description:`El monto no puede ser mayor al saldo pendiente de $${(0,N.formatCurrency)(t)}`}))},onFocus:e=>{ep.monto&&(e.target.value=ep.monto)},onBlur:e=>{ep.monto&&(e.target.value=(0,N.formatCurrency)(ep.monto))},placeholder:`M\xe1ximo: $${(0,N.formatCurrency)(T?.saldo_pendiente||0)}`,required:!0}),ep.monto&&Number.parseFloat(ep.monto)>0&&T&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Nuevo saldo: $",(0,N.formatCurrency)(Math.max(0,T.saldo_pendiente-Number.parseFloat(ep.monto)))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"metodoPagoIndividual",children:"Método de Pago *"}),(0,a.jsxs)(c.Select,{value:ep.metodoPago,onValueChange:e=>ej({...ep,metodoPago:e}),children:[(0,a.jsx)(c.SelectTrigger,{id:"metodoPagoIndividual",children:(0,a.jsx)(c.SelectValue,{})}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"efectivo",children:"Efectivo"}),(0,a.jsx)(c.SelectItem,{value:"transferencia",children:"Transferencia"})]})]})]}),"transferencia"===ep.metodoPago&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"referenciaIndividual",children:"Referencia de Transferencia"}),(0,a.jsx)(n.Input,{id:"referenciaIndividual",value:ep.referencia,onChange:e=>ej({...ep,referencia:e.target.value}),placeholder:"Número de referencia"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"notasIndividual",children:"Notas (opcional)"}),(0,a.jsx)(m.Textarea,{id:"notasIndividual",value:ep.notas,onChange:e=>ej({...ep,notas:e.target.value}),placeholder:"Observaciones adicionales",rows:3})]})]}),(0,a.jsxs)(d.DialogFooter,{children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:eD,children:"Cancelar"}),(0,a.jsx)(r.Button,{type:"submit",disabled:X,children:X?"Registrando...":"Registrar Abono"})]})]})]})}),(0,a.jsx)(d.Dialog,{open:eo,onOpenChange:ei,children:(0,a.jsxs)(d.DialogContent,{className:"max-w-full mx-4",children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Buscar Historial de Abonos"}),(0,a.jsx)(d.DialogDescription,{children:"Busca un cliente para ver su historial completo de abonos"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"buscarHistorial",children:"Buscar Cliente"}),(0,a.jsx)(n.Input,{id:"buscarHistorial",placeholder:"Buscar por nombre o identificación...",value:P,onChange:e=>A(e.target.value),autoFocus:!0})]}),P&&(0,a.jsx)(v.ScrollArea,{className:"h-[400px] border rounded-md",children:S.filter(e=>(0,N.normalizeText)(e.nombre).includes((0,N.normalizeText)(P))||(0,N.normalizeText)(e.identificacion).includes((0,N.normalizeText)(P))).map(e=>(0,a.jsx)("div",{className:"p-4 border-b hover:bg-accent cursor-pointer transition-colors",onClick:async()=>{ei(!1),A(""),await eS(e)},children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-base",children:e.nombre}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"ID:"})," ",e.identificacion,e.telefono&&(0,a.jsxs)(a.Fragment,{children:[" "," | ",(0,a.jsx)("span",{className:"font-medium",children:"Tel:"})," ",e.telefono]})]})]}),(0,a.jsxs)("div",{className:"text-right ml-4",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-[#D4AF37]",children:["$",(0,N.formatCurrency)(e.saldo_pendiente)]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.cuentas_pendientes," ",1===e.cuentas_pendientes?"factura":"facturas"]})]})]})},e.id))})]})]})}),(0,a.jsx)(d.Dialog,{open:ea,onOpenChange:es,children:(0,a.jsxs)(d.DialogContent,{className:"max-w-3xl max-h-[150vh]",children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Abonar a Cliente con Distribución Automática"}),(0,a.jsx)(d.DialogDescription,{children:"Busca un cliente y el pago se distribuirá automáticamente entre sus facturas pendientes (más antiguas primero)"})]}),(0,a.jsx)(v.ScrollArea,{className:"max-h-[70vh]",children:(0,a.jsxs)("form",{onSubmit:ew,children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"cliente",children:"Buscar Cliente *"}),(0,a.jsx)(n.Input,{id:"cliente",placeholder:"Buscar por nombre o identificación...",value:H,onChange:e=>E(e.target.value)}),H&&(0,a.jsx)("div",{className:"border rounded-md max-h-48 overflow-y-auto mt-2",children:0===eH.length?(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No se encontraron clientes"}):eH.map(e=>(0,a.jsx)("div",{className:`p-3 border-b cursor-pointer hover:bg-accent ${_?.id===e.id?"bg-accent":""}`,onClick:()=>{$(e),E(e.nombre)},children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-base",children:e.nombre}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"ID:"})," ",e.identificacion,e.telefono&&(0,a.jsxs)(a.Fragment,{children:[" | ",(0,a.jsx)("span",{className:"font-medium",children:"Tel:"})," ",e.telefono]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),eS(e)},title:"Ver historial de abonos",children:(0,a.jsx)(p,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-[#D4AF37]",children:["$",(0,N.formatCurrency)(e.saldo_pendiente)]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.cuentas_pendientes," ",1===e.cuentas_pendientes?"factura":"facturas"]})]})]})]})},e.id))})]}),_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.Card,{className:"bg-muted",children:(0,a.jsx)(t.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Facturas Pendientes"}),(0,a.jsx)("p",{className:"font-semibold",children:_.cuentas_pendientes})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Total Deuda"}),(0,a.jsxs)("p",{className:"font-semibold text-[#D4AF37]",children:["$",(0,N.formatCurrency)(_.saldo_pendiente)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Cliente"}),(0,a.jsx)("p",{className:"font-semibold text-xs",children:_.nombre})]})]})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"montoCliente",children:"Monto del Abono *"}),(0,a.jsx)(n.Input,{id:"montoCliente",type:"text",value:ef.monto?(0,N.formatCurrency)(ef.monto):"",onChange:e=>{let a=e.target.value.replace(/\./g,"").replace(/[^0-9]/g,""),s=Number.parseFloat(a)||0,t=_?.saldo_pendiente||0;s<=t?eg({...ef,monto:a}):(eg({...ef,monto:t.toString()}),b.toast.error("Monto excedido",{description:`El monto no puede ser mayor al saldo total del cliente de $${(0,N.formatCurrency)(t)}`}))},onFocus:e=>{ef.monto&&(e.target.value=ef.monto)},onBlur:e=>{ef.monto&&(e.target.value=(0,N.formatCurrency)(ef.monto))},placeholder:`M\xe1ximo: $${(0,N.formatCurrency)(_?.saldo_pendiente||0)}`,required:!0}),ef.monto&&Number.parseFloat(ef.monto)>0&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Nuevo saldo del cliente: $",(0,N.formatCurrency)(Math.max(0,_.saldo_pendiente-Number.parseFloat(ef.monto)))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"metodoPagoCliente",children:"Método de Pago *"}),(0,a.jsxs)(c.Select,{value:ef.metodoPago,onValueChange:e=>eg({...ef,metodoPago:e}),children:[(0,a.jsx)(c.SelectTrigger,{id:"metodoPagoCliente",children:(0,a.jsx)(c.SelectValue,{})}),(0,a.jsxs)(c.SelectContent,{children:[(0,a.jsx)(c.SelectItem,{value:"efectivo",children:"Efectivo"}),(0,a.jsx)(c.SelectItem,{value:"transferencia",children:"Transferencia"})]})]})]}),"transferencia"===ef.metodoPago&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"referenciaCliente",children:"Referencia de Transferencia"}),(0,a.jsx)(n.Input,{id:"referenciaCliente",value:ef.referencia,onChange:e=>eg({...ef,referencia:e.target.value}),placeholder:"Número de referencia"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"notasCliente",children:"Notas (opcional)"}),(0,a.jsx)(m.Textarea,{id:"notasCliente",value:ef.notas,onChange:e=>eg({...ef,notas:e.target.value}),placeholder:"Observaciones adicionales",rows:3})]})]})]}),(0,a.jsxs)(d.DialogFooter,{children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:e_,children:"Cancelar"}),(0,a.jsx)(r.Button,{type:"submit",disabled:X||!_,children:X?"Registrando...":"Distribuir Abono"})]})]})})]})}),(0,a.jsx)(d.Dialog,{open:et,onOpenChange:e=>{er(e),e||z("")},children:(0,a.jsxs)(d.DialogContent,{className:"w-[99vw] h-[95vh] flex flex-col p-0",style:{maxWidth:"60vw"},children:[(0,a.jsxs)(d.DialogHeader,{className:"px-6 pt-6 pb-4 border-b",children:[(0,a.jsx)(d.DialogTitle,{className:"text-xl md:text-2xl",children:"Historial de Abonos de Factura"}),(0,a.jsxs)(d.DialogDescription,{className:"text-sm md:text-base",children:[(0,a.jsxs)("span",{className:"font-semibold text-foreground",children:["Factura #",T?.numero_venta]}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-xs md:text-sm",children:["Cliente: ",(0,a.jsx)("span",{className:"font-medium",children:T?.cliente_nombre})]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"px-6 py-4",children:[(0,a.jsx)(t.Card,{className:"mb-6 bg-gradient-to-r from-muted to-muted/50 border-2",children:(0,a.jsx)(t.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Monto Total"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-primary",children:["$",(0,N.formatCurrency)(T?.monto_total||0)]})]}),(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Total Abonado"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:["$",(0,N.formatCurrency)(T?.total_abonado||0)]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[T?.cantidad_abonos||0," ",T?.cantidad_abonos===1?"abono":"abonos"]})]}),(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Saldo Pendiente"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-[#D4AF37]",children:["$",(0,N.formatCurrency)(T?.saldo_pendiente||0)]})]})]})})}),ed.length>0&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(n.Input,{placeholder:"Buscar por fecha, monto, método, referencia, notas o usuario...",value:B,onChange:e=>z(e.target.value),className:"max-w-2xl"})}),0===(e=ed.filter(e=>{if(!B)return!0;let a=(0,N.normalizeText)(B);return(0,N.normalizeText)(new Date(e.fecha).toLocaleString("es-EC")).includes(a)||(0,N.normalizeText)(e.monto.toString()).includes(a)||(0,N.normalizeText)(e.metodoPago).includes(a)||(0,N.normalizeText)(e.referencia||"").includes(a)||(0,N.normalizeText)(e.notas||"").includes(a)||(0,N.normalizeText)(e.usuario).includes(a)})).length?(0,a.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,a.jsx)(p,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:0===ed.length?"No hay abonos registrados":"No se encontraron abonos"}),(0,a.jsx)("p",{className:"text-sm",children:0===ed.length?"Esta factura no tiene historial de pagos":"Intenta con otro término de búsqueda"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden md:block border rounded-lg",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:(0,a.jsxs)(i.Table,{className:"w-full",children:[(0,a.jsx)(i.TableHeader,{className:"sticky top-0 bg-background z-10",children:(0,a.jsxs)(i.TableRow,{className:"bg-muted/50",children:[(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[160px]",children:"Fecha"}),(0,a.jsx)(i.TableHead,{className:"font-semibold text-right whitespace-nowrap min-w-[120px]",children:"Monto"}),(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Método"}),(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Referencia"}),(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Notas"}),(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[90px]",children:"Usuario"})]})}),(0,a.jsx)(i.TableBody,{children:e.map(e=>(0,a.jsxs)(i.TableRow,{className:"hover:bg-muted/30",children:[(0,a.jsx)(i.TableCell,{className:"text-sm whitespace-nowrap font-medium",children:new Date(e.fecha).toLocaleString("es-EC",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,a.jsxs)(i.TableCell,{className:"text-base font-bold text-green-600 text-right whitespace-nowrap",children:["$",(0,N.formatCurrency)(e.monto)]}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(o.Badge,{variant:"secondary",className:"capitalize",children:e.metodoPago})}),(0,a.jsx)(i.TableCell,{className:"text-sm",children:e.referencia?(0,a.jsx)("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded break-words",children:e.referencia}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(i.TableCell,{className:"text-sm",children:e.notas?(0,a.jsx)("div",{className:"break-words",title:e.notas,children:e.notas}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(i.TableCell,{className:"text-sm font-medium",children:e.usuario})]},e.id))})]})})})}),(0,a.jsx)("div",{className:"md:hidden space-y-4",children:e.map(e=>(0,a.jsx)(t.Card,{className:"overflow-hidden border-2 hover:border-primary/50 transition-colors",children:(0,a.jsxs)(t.CardContent,{className:"p-0",children:[(0,a.jsx)("div",{className:"bg-muted/50 p-3 border-b",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground font-medium mb-1",children:new Date(e.fecha).toLocaleString("es-EC",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["$",(0,N.formatCurrency)(e.monto)]})})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Método de Pago"}),(0,a.jsx)(o.Badge,{variant:"secondary",className:"text-xs capitalize",children:e.metodoPago})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Usuario"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.usuario})]})]}),e.referencia&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Referencia"}),(0,a.jsx)("p",{className:"text-sm font-mono bg-muted px-2 py-1 rounded break-all",children:e.referencia})]}),e.notas&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Notas"}),(0,a.jsx)("p",{className:"text-sm bg-muted/50 px-3 py-2 rounded",children:e.notas})]})]})]})},e.id))})]})]})})]})}),(0,a.jsx)(d.Dialog,{open:en,onOpenChange:e=>{el(e),e||(z(""),k(!1),M(""),O(""))},children:(0,a.jsxs)(d.DialogContent,{className:"w-[99vw] h-[95vh] flex flex-col p-0",style:{maxWidth:"60vw"},children:[(0,a.jsxs)(d.DialogHeader,{className:"px-6 pt-6 pb-4 border-b",children:[(0,a.jsx)(d.DialogTitle,{className:"text-xl md:text-2xl",children:"Historial General de Abonos"}),(0,a.jsxs)(d.DialogDescription,{className:"text-sm md:text-base",children:[(0,a.jsxs)("span",{className:"font-semibold text-foreground",children:["Cliente: ",_?.nombre]}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-xs md:text-sm",children:["ID: ",_?.identificacion,eh&&(0,a.jsxs)(a.Fragment,{children:[" "," | Total Abonado: ",(0,a.jsxs)("span",{className:"font-semibold text-green-600",children:["$",(0,N.formatCurrency)(eh.total_abonado)]})," "," | Saldo Pendiente: ",(0,a.jsxs)("span",{className:"font-semibold text-[#D4AF37]",children:["$",(0,N.formatCurrency)(eh.saldo_pendiente)]})]})]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"px-6 py-4",children:[ed.length>0&&(0,a.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Input,{placeholder:"Buscar por fecha, factura, monto, método, referencia, notas o usuario...",value:B,onChange:e=>z(e.target.value),className:"flex-1"}),(0,a.jsx)(r.Button,{type:"button",variant:I?"default":"outline",onClick:()=>k(!I),className:"whitespace-nowrap",children:I?"Ocultar Fechas":"Buscar por Fechas"})]}),I&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-md bg-muted/50",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"fechaInicioHistorial",children:"Fecha Inicio"}),(0,a.jsx)(n.Input,{id:"fechaInicioHistorial",type:"date",value:L,onChange:e=>M(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"fechaFinHistorial",children:"Fecha Fin"}),(0,a.jsx)(n.Input,{id:"fechaFinHistorial",type:"date",value:R,onChange:e=>O(e.target.value)})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex gap-2 justify-end",children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>{M(""),O(""),_&&eC(_.id)},children:"Limpiar Filtros"}),(0,a.jsx)(r.Button,{type:"button",onClick:()=>{_&&eC(_.id,L,R)},children:"Aplicar Filtro"})]})]})]}),0===(C=ed.filter(e=>{if(!B)return!0;let a=(0,N.normalizeText)(B);return(0,N.normalizeText)(new Date(e.fecha).toLocaleString("es-EC")).includes(a)||(0,N.normalizeText)(e.numero_venta?.toString()||"").includes(a)||(0,N.normalizeText)(e.monto.toString()).includes(a)||(0,N.normalizeText)(e.metodoPago).includes(a)||(0,N.normalizeText)(e.referencia||"").includes(a)||(0,N.normalizeText)(e.notas||"").includes(a)||(0,N.normalizeText)(e.usuario).includes(a)})).length?(0,a.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,a.jsx)(p,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:0===ed.length?"No hay abonos registrados":"No se encontraron abonos"}),(0,a.jsx)("p",{className:"text-sm",children:0===ed.length?"Este cliente no tiene historial de pagos":"Intenta con otro término de búsqueda"})]}):(0,a.jsxs)(a.Fragment,{children:[eh&&(0,a.jsx)(t.Card,{className:"mb-6 bg-gradient-to-r from-muted to-muted/50 border-2",children:(0,a.jsx)(t.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Total Abonado"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:["$",(0,N.formatCurrency)(eh.total_abonado)]})]}),(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Cantidad de Abonos"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-primary",children:eh.cantidad_abonos}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"pagos registrados"})]}),(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Saldo Pendiente"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-[#D4AF37]",children:["$",(0,N.formatCurrency)(eh.saldo_pendiente)]})]})]})})}),(0,a.jsx)("div",{className:"hidden md:block border rounded-lg",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:(0,a.jsxs)(i.Table,{className:"w-full",children:[(0,a.jsx)(i.TableHeader,{className:"sticky top-0 bg-background z-10",children:(0,a.jsxs)(i.TableRow,{className:"bg-muted/50",children:[(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[160px]",children:"Fecha"}),(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[100px]",children:"Factura"}),(0,a.jsx)(i.TableHead,{className:"font-semibold text-right whitespace-nowrap min-w-[120px]",children:"Monto"}),(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Método"}),(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Referencia"}),(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Notas"}),(0,a.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[90px]",children:"Usuario"})]})}),(0,a.jsx)(i.TableBody,{children:C.map(e=>(0,a.jsxs)(i.TableRow,{className:"hover:bg-muted/30",children:[(0,a.jsx)(i.TableCell,{className:"text-sm whitespace-nowrap font-medium",children:new Date(e.fecha).toLocaleString("es-EC",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,a.jsx)(i.TableCell,{children:e.numero_venta?(0,a.jsxs)(o.Badge,{variant:"outline",className:"font-mono",children:["#",e.numero_venta]}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsxs)(i.TableCell,{className:"text-base font-bold text-green-600 text-right whitespace-nowrap",children:["$",(0,N.formatCurrency)(e.monto)]}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(o.Badge,{variant:"secondary",className:"capitalize",children:e.metodoPago})}),(0,a.jsx)(i.TableCell,{className:"text-sm",children:e.referencia?(0,a.jsx)("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded break-words",children:e.referencia}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(i.TableCell,{className:"text-sm",children:e.notas?(0,a.jsx)("div",{className:"break-words",title:e.notas,children:e.notas}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(i.TableCell,{className:"text-sm font-medium",children:e.usuario})]},e.id))})]})})})}),(0,a.jsx)("div",{className:"md:hidden space-y-4",children:C.map(e=>(0,a.jsx)(t.Card,{className:"overflow-hidden border-2 hover:border-primary/50 transition-colors",children:(0,a.jsxs)(t.CardContent,{className:"p-0",children:[(0,a.jsx)("div",{className:"bg-muted/50 p-3 border-b",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground font-medium mb-1",children:new Date(e.fecha).toLocaleString("es-EC",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),e.numero_venta&&(0,a.jsxs)(o.Badge,{variant:"outline",className:"text-xs font-mono",children:["#",e.numero_venta]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["$",(0,N.formatCurrency)(e.monto)]})})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Método de Pago"}),(0,a.jsx)(o.Badge,{variant:"secondary",className:"text-xs capitalize",children:e.metodoPago})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Usuario"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.usuario})]})]}),e.referencia&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Referencia"}),(0,a.jsx)("p",{className:"text-sm font-mono bg-muted px-2 py-1 rounded break-all",children:e.referencia})]}),e.notas&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Notas"}),(0,a.jsx)("p",{className:"text-sm bg-muted/50 px-3 py-2 rounded",children:e.notas})]})]})]})},e.id))})]})]})})]})})]})}e.s(["ClientesContent",()=>C],36446)}]);