(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10708,e=>{"use strict";var s=e.i(29511),t=e.i(58138),a=e.i(34676),l=t.forwardRef((e,t)=>(0,s.jsx)(a.Primitive.label,{...e,ref:t,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var r=e.i(47163);function o({className:e,...t}){return(0,s.jsx)(l,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>o],10708)},47627,e=>{"use strict";var s=e.i(29511),t=e.i(47163);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,t.cn)("w-full caption-bottom text-sm",e),...a})})}function l({className:e,...a}){return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,t.cn)("[&_tr]:border-b",e),...a})}function r({className:e,...a}){return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,t.cn)("[&_tr:last-child]:border-0",e),...a})}function o({className:e,...a}){return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,t.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function n({className:e,...a}){return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,t.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function i({className:e,...a}){return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,t.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}e.s(["Table",()=>a,"TableBody",()=>r,"TableCell",()=>i,"TableHead",()=>n,"TableHeader",()=>l,"TableRow",()=>o])},65739,e=>{"use strict";let s=(0,e.i(10965).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>s],65739)},82732,e=>{"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>s])},13637,e=>{"use strict";let s=(0,e.i(10965).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>s],13637)},64626,e=>{"use strict";let s=(0,e.i(10965).default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);e.s(["TrendingDown",()=>s],64626)},83847,e=>{"use strict";var s=e.i(29511),t=e.i(58138),a=e.i(16755),l=e.i(70065),r=e.i(67881),o=e.i(10708),n=e.i(23750),i=e.i(47627),d=e.i(13637),c=e.i(62412),x=e.i(84675),m=e.i(60039),h=e.i(65739),u=e.i(64626),b=e.i(60313),j=e.i(68451);function g(){let e=(0,a.useRouter)(),[g,f]=(0,t.useState)(""),[C,p]=(0,t.useState)(""),[T,N]=(0,t.useState)(null),[y,w]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=new Date;f(new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0]),p(e.toISOString().split("T")[0])},[]);let v=async()=>{if(g&&C){w(!0);try{let e=await fetch(`/api/reportes/financieros/estado-resultados?fechaInicio=${g}&fechaFin=${C}`),s=await e.json();N(s)}catch(e){console.error("Error cargando reporte:",e),alert("Error al cargar el reporte")}finally{w(!1)}}};return(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>e.back(),children:(0,s.jsx)(x.ArrowLeft,{className:"h-5 w-5"})}),(0,s.jsx)(b.SidebarToggle,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Estado de Resultados"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Análisis de ingresos, egresos y utilidad del período"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{if(!T)return;let e={headers:["Concepto","Valor"],rows:[["INGRESOS",""],["Ventas Totales",(0,j.formatCurrency)(T.ingresos.ventasTotales)],["Ventas de Contado",(0,j.formatCurrency)(T.ingresos.ventasContado)],["Ventas a Crédito",(0,j.formatCurrency)(T.ingresos.ventasCredito)],["Abonos Recibidos",(0,j.formatCurrency)(T.ingresos.abonosRecibidos)],["Total Ingresos",(0,j.formatCurrency)(T.ingresos.total)],["",""],["EGRESOS",""],["Costo de Ventas",(0,j.formatCurrency)(T.egresos.costoVentas)],["Gastos Operativos",(0,j.formatCurrency)(T.egresos.gastos)],["Otros Egresos",(0,j.formatCurrency)(T.egresos.otros)],["Total Egresos",(0,j.formatCurrency)(T.egresos.total)],["",""],["RESULTADO",""],["Utilidad Bruta",(0,j.formatCurrency)(T.utilidadBruta)],["Utilidad Neta",(0,j.formatCurrency)(T.utilidadNeta)],["Margen Bruto",`${T.margenBruto.toFixed(2)}%`],["Margen Neto",`${T.margenNeto.toFixed(2)}%`]]},s={title:"Estado de Resultados",subtitle:"Análisis de Ingresos y Egresos",period:`${g} a ${C}`,orientation:"portrait",companyInfo:{name:"Valva Boutique",address:"Sistema POS",phone:"Reporte Financiero"}};(0,j.exportToPDF)(e,s)},disabled:!T,children:[(0,s.jsx)(d.Download,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{if(!T)return;let e={headers:["Concepto","Valor"],rows:[["INGRESOS",""],["Ventas Totales",T.ingresos.ventasTotales],["Ventas de Contado",T.ingresos.ventasContado],["Ventas a Crédito",T.ingresos.ventasCredito],["Abonos Recibidos",T.ingresos.abonosRecibidos],["Total Ingresos",T.ingresos.total],["",""],["EGRESOS",""],["Costo de Ventas",T.egresos.costoVentas],["Gastos Operativos",T.egresos.gastos],["Otros Egresos",T.egresos.otros],["Total Egresos",T.egresos.total],["",""],["RESULTADO",""],["Utilidad Bruta",T.utilidadBruta],["Utilidad Neta",T.utilidadNeta],["Margen Bruto (%)",T.margenBruto],["Margen Neto (%)",T.margenNeto]]};(0,j.exportToExcel)(e,{title:"Estado de Resultados",period:`${g} a ${C}`,sheetName:"Estado de Resultados"})},disabled:!T,children:[(0,s.jsx)(d.Download,{className:"mr-2 h-4 w-4"}),"Excel"]})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{children:"Filtros del Reporte"}),(0,s.jsx)(l.CardDescription,{children:"Seleccione el período a analizar"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.Label,{htmlFor:"fecha-inicio",children:"Fecha Inicio"}),(0,s.jsx)(n.Input,{id:"fecha-inicio",type:"date",value:g,onChange:e=>f(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.Label,{htmlFor:"fecha-fin",children:"Fecha Fin"}),(0,s.jsx)(n.Input,{id:"fecha-fin",type:"date",value:C,onChange:e=>p(e.target.value)})]}),(0,s.jsx)("div",{className:"flex items-end md:col-span-2",children:(0,s.jsxs)(r.Button,{className:"w-full",onClick:v,disabled:y,children:[(0,s.jsx)(c.FileText,{className:"mr-2 h-4 w-4"}),y?"Generando...":"Generar Reporte"]})})]})})]}),T&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Ingresos Totales"}),(0,s.jsx)(h.TrendingUp,{className:"h-4 w-4 text-green-600"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(0,j.formatCurrency)(T.ingresos.total)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Ventas y abonos del período"})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Egresos Totales"}),(0,s.jsx)(u.TrendingDown,{className:"h-4 w-4 text-red-600"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(0,j.formatCurrency)(T.egresos.total)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Costos y gastos del período"})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Utilidad Neta"}),(0,s.jsx)(m.DollarSign,{className:"h-4 w-4 text-blue-600"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:`text-2xl font-bold ${T.utilidadNeta>=0?"text-blue-600":"text-red-600"}`,children:(0,j.formatCurrency)(T.utilidadNeta)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Ganancia/Pérdida final"})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Margen Neto"}),(0,s.jsx)(h.TrendingUp,{className:"h-4 w-4 text-purple-600"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[T.margenNeto.toFixed(2),"%"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Rentabilidad sobre ventas"})]})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"text-green-700",children:"Ingresos"}),(0,s.jsx)(l.CardDescription,{children:"Detalle de ingresos del período"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)(i.Table,{children:[(0,s.jsx)(i.TableHeader,{children:(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableHead,{children:"Concepto"}),(0,s.jsx)(i.TableHead,{className:"text-right",children:"Monto"})]})}),(0,s.jsxs)(i.TableBody,{children:[(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"font-medium",children:"Ventas Totales"}),(0,s.jsx)(i.TableCell,{className:"text-right",children:(0,j.formatCurrency)(T.ingresos.ventasTotales)})]}),(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"pl-8 text-muted-foreground",children:"• Ventas de Contado"}),(0,s.jsx)(i.TableCell,{className:"text-right text-muted-foreground",children:(0,j.formatCurrency)(T.ingresos.ventasContado)})]}),(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"pl-8 text-muted-foreground",children:"• Ventas a Crédito"}),(0,s.jsx)(i.TableCell,{className:"text-right text-muted-foreground",children:(0,j.formatCurrency)(T.ingresos.ventasCredito)})]}),(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"font-medium",children:"Abonos Recibidos"}),(0,s.jsx)(i.TableCell,{className:"text-right",children:(0,j.formatCurrency)(T.ingresos.abonosRecibidos)})]}),(0,s.jsxs)(i.TableRow,{className:"bg-green-50",children:[(0,s.jsx)(i.TableCell,{className:"font-bold",children:"Total Ingresos"}),(0,s.jsx)(i.TableCell,{className:"text-right font-bold text-green-700",children:(0,j.formatCurrency)(T.ingresos.total)})]})]})]})})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"text-red-700",children:"Egresos"}),(0,s.jsx)(l.CardDescription,{children:"Detalle de costos y gastos del período"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)(i.Table,{children:[(0,s.jsx)(i.TableHeader,{children:(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableHead,{children:"Concepto"}),(0,s.jsx)(i.TableHead,{className:"text-right",children:"Monto"})]})}),(0,s.jsxs)(i.TableBody,{children:[(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"font-medium",children:"Costo de Ventas"}),(0,s.jsx)(i.TableCell,{className:"text-right",children:(0,j.formatCurrency)(T.egresos.costoVentas)})]}),(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"font-medium",children:"Gastos Operativos"}),(0,s.jsx)(i.TableCell,{className:"text-right",children:(0,j.formatCurrency)(T.egresos.gastos)})]}),(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"font-medium",children:"Otros Egresos"}),(0,s.jsx)(i.TableCell,{className:"text-right",children:(0,j.formatCurrency)(T.egresos.otros)})]}),(0,s.jsxs)(i.TableRow,{className:"bg-red-50",children:[(0,s.jsx)(i.TableCell,{className:"font-bold",children:"Total Egresos"}),(0,s.jsx)(i.TableCell,{className:"text-right font-bold text-red-700",children:(0,j.formatCurrency)(T.egresos.total)})]})]})]})})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"text-blue-700",children:"Análisis de Resultados"}),(0,s.jsx)(l.CardDescription,{children:"Utilidad y márgenes del período"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)(i.Table,{children:[(0,s.jsx)(i.TableHeader,{children:(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableHead,{children:"Indicador"}),(0,s.jsx)(i.TableHead,{className:"text-right",children:"Valor"})]})}),(0,s.jsxs)(i.TableBody,{children:[(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"font-medium",children:"Utilidad Bruta"}),(0,s.jsx)(i.TableCell,{className:"text-right font-semibold",children:(0,j.formatCurrency)(T.utilidadBruta)})]}),(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"font-medium",children:"Margen Bruto"}),(0,s.jsxs)(i.TableCell,{className:"text-right",children:[T.margenBruto.toFixed(2),"%"]})]}),(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"font-medium",children:"Utilidad Neta"}),(0,s.jsx)(i.TableCell,{className:"text-right font-semibold",children:(0,j.formatCurrency)(T.utilidadNeta)})]}),(0,s.jsxs)(i.TableRow,{children:[(0,s.jsx)(i.TableCell,{className:"font-medium",children:"Margen Neto"}),(0,s.jsxs)(i.TableCell,{className:"text-right",children:[T.margenNeto.toFixed(2),"%"]})]})]})]})})]})]}),!T&&!y&&(0,s.jsx)(l.Card,{children:(0,s.jsxs)(l.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(c.FileText,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Genere el reporte"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center",children:'Seleccione las fechas y haga clic en "Generar Reporte" para ver el análisis'})]})})]})}e.s(["EstadoResultadosContent",()=>g])},66997,e=>{e.v(s=>Promise.all(["static/chunks/cf4fc1e20e39d4cb.js"].map(s=>e.l(s))).then(()=>s(21487)))},95732,e=>{e.v(s=>Promise.all(["static/chunks/204bb282bc57b968.js"].map(s=>e.l(s))).then(()=>s(1983)))},23548,e=>{e.v(s=>Promise.all(["static/chunks/cc5e7d8e69503b6d.js"].map(s=>e.l(s))).then(()=>s(29685)))}]);