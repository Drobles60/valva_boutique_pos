module.exports=[44151,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(3130),e=a.i(40695),f=a.i(17171),g=a.i(5522),h=a.i(87682),i=a.i(54161),j=a.i(88237),k=a.i(70854),l=a.i(69617),m=a.i(99009),n=a.i(96926),o=a.i(75663);let p=(0,a.i(61237).default)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var q=a.i(75686),r=a.i(98332),s=a.i(19591),t=a.i(77577),u=a.i(39793),v=a.i(97895);function w(){let a,w,[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("todo"),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!1);(0,c.useEffect)(()=>{I(!0),G((0,t.getCurrentUser)()),J();let a=new Date,b=new Date(a);b.setDate(a.getDate()-7),A(b.toISOString().split("T")[0]),C(a.toISOString().split("T")[0])},[]);let J=()=>{y((0,t.getVentas)())},K=x.filter(a=>{let b=new Date(a.fecha),c=new Date(z||0),d=B?new Date(B):new Date;return d.setHours(23,59,59),b>=c&&b<=d}),L=(0,t.getProducts)(),M=(a=0,w=0,K.forEach(b=>{b.productos.forEach(b=>{let c=L.find(a=>a.id===b.producto.id);c&&(a+=c.precioCosto*b.cantidad,w+=b.precioUnitario*b.cantidad)})}),{totalCosto:a,totalVenta:w,utilidad:w-a,margen:w>0?(w-a)/w*100:0}),N=K.flatMap(a=>a.productos).reduce((a,b)=>{let c=L.find(a=>a.id===b.producto.id);if(!c)return a;let d=b.producto.id;return a[d]||(a[d]={producto:b.producto,cantidad:0,totalVenta:0,totalCosto:0,utilidad:0}),a[d].cantidad+=b.cantidad,a[d].totalVenta+=b.precioUnitario*b.cantidad,a[d].totalCosto+=c.precioCosto*b.cantidad,a[d].utilidad=a[d].totalVenta-a[d].totalCosto,a},{}),O=Object.values(N).sort((a,b)=>b.totalVenta-a.totalVenta).slice(0,10),P=Object.values(N).sort((a,b)=>b.utilidad-a.utilidad).slice(0,10),Q=K.reduce((a,b)=>{let c=new Date(b.fecha).toLocaleDateString();return a[c]||(a[c]={total:0,transacciones:0,utilidad:0}),a[c].total+=b.total,a[c].transacciones+=1,b.productos.forEach(b=>{let d=L.find(a=>a.id===b.producto.id);d&&(a[c].utilidad+=(b.precioUnitario-d.precioCosto)*b.cantidad)}),a},{}),R=K.reduce((a,b)=>a+b.total,0),S=K.filter(a=>"completada"===a.estado).reduce((a,b)=>a+b.total,0),T=K.filter(a=>"credito"===a.estado).reduce((a,b)=>a+b.total,0),U=K.length>0?R/K.length:0,V=F?.rol==="administrador";return H?(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(u.SidebarToggle,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Reportes y Analíticas"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Análisis de ventas y rentabilidad"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"flex-1 md:flex-none",children:[(0,b.jsx)(l.Download,{className:"mr-2 h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Exportar"})," PDF"]}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"flex-1 md:flex-none",children:[(0,b.jsx)(l.Download,{className:"mr-2 h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Exportar"})," Excel"]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(d.Card,{className:"border-2 border-primary/20 hover:border-primary/40 transition-all cursor-pointer",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,b.jsx)(q.BarChart3,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{className:"text-base",children:"Reportes Generales"}),(0,b.jsx)(d.CardDescription,{className:"text-xs",children:"Ventas y productos"})]})]})})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Análisis de ventas, productos más vendidos, rentabilidad y estadísticas generales del negocio."}),(0,b.jsxs)("ul",{className:"text-xs space-y-1 text-muted-foreground",children:[(0,b.jsx)("li",{children:"• Ventas por período"}),(0,b.jsx)("li",{children:"• Top productos"}),(0,b.jsx)("li",{children:"• Análisis de rentabilidad"}),(0,b.jsx)("li",{children:"• Ticket promedio"})]})]})]}),(0,b.jsxs)(d.Card,{className:"border-2 border-blue-500/20 hover:border-blue-500/40 transition-all cursor-pointer",onClick:()=>window.location.href="/reportes/contables",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-500/10",children:(0,b.jsx)(s.Calculator,{className:"h-6 w-6 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{className:"text-base",children:"Reportes Contables"}),(0,b.jsx)(d.CardDescription,{className:"text-xs",children:"Finanzas y contabilidad"})]})]})})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Reportes financieros avanzados: estado de resultados, flujo de caja, gastos, inventario y más."}),(0,b.jsxs)("ul",{className:"text-xs space-y-1 text-muted-foreground",children:[(0,b.jsx)("li",{children:"• Estado de resultados"}),(0,b.jsx)("li",{children:"• Flujo de caja"}),(0,b.jsx)("li",{children:"• Análisis de gastos"}),(0,b.jsx)("li",{children:"• Cartera de créditos"})]}),(0,b.jsx)(e.Button,{size:"sm",className:"w-full mt-3 bg-blue-600 hover:bg-blue-700",children:"Ver Reportes Contables →"})]})]}),(0,b.jsxs)(d.Card,{className:"border-2 border-green-500/20 hover:border-green-500/40 transition-all",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-green-500/10",children:(0,b.jsx)(r.PieChart,{className:"h-6 w-6 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{className:"text-base",children:"Estadísticas Avanzadas"}),(0,b.jsx)(d.CardDescription,{className:"text-xs",children:"Análisis detallados"})]})]})})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Métricas adicionales, gráficas comparativas y análisis de tendencias de tu negocio."}),(0,b.jsxs)("ul",{className:"text-xs space-y-1 text-muted-foreground",children:[(0,b.jsx)("li",{children:"• Tendencias de ventas"}),(0,b.jsx)("li",{children:"• Comparativas por período"}),(0,b.jsx)("li",{children:"• Análisis de clientes"}),(0,b.jsx)("li",{children:"• Rotación de inventario"})]})]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Filtros de Reporte"}),(0,b.jsx)(d.CardDescription,{children:"Seleccione el período para analizar"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"tipo-reporte",children:"Tipo de Análisis"}),(0,b.jsxs)(h.Select,{value:D,onValueChange:E,children:[(0,b.jsx)(h.SelectTrigger,{id:"tipo-reporte",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"todo",children:"Todos"}),(0,b.jsx)(h.SelectItem,{value:"ventas",children:"Solo Ventas"}),(0,b.jsx)(h.SelectItem,{value:"rentabilidad",children:"Rentabilidad"}),(0,b.jsx)(h.SelectItem,{value:"productos",children:"Por Producto"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"fecha-inicio",children:"Fecha Inicio"}),(0,b.jsx)(g.Input,{id:"fecha-inicio",type:"date",value:z,onChange:a=>A(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"fecha-fin",children:"Fecha Fin"}),(0,b.jsx)(g.Input,{id:"fecha-fin",type:"date",value:B,onChange:a=>C(a.target.value)})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsxs)(e.Button,{className:"w-full",onClick:J,children:[(0,b.jsx)(k.FileText,{className:"mr-2 h-4 w-4"}),"Actualizar"]})})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Ventas Totales"}),(0,b.jsx)(o.ShoppingCart,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["$",(0,v.formatCurrency)(R)]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[K.length," transacciones"]})]})]}),V&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Utilidad Bruta"}),(0,b.jsx)(n.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-[#D4AF37]",children:["$",(0,v.formatCurrency)(M.utilidad)]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ventas menos costos"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Margen de Utilidad"}),(0,b.jsx)(p,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-[#D4AF37]",children:[M.margen.toFixed(1),"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Rentabilidad promedio"})]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Ticket Promedio"}),(0,b.jsx)(m.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["$",(0,v.formatCurrency)(U)]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Por transacción"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Ventas por Método de Pago"}),(0,b.jsx)(d.CardDescription,{children:"Distribución de ventas"})]}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-green-500/10",children:(0,b.jsx)(n.DollarSign,{className:"h-6 w-6 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Ventas de Contado"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(S/R*100||0).toFixed(1),"% del total"]})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",(0,v.formatCurrency)(S)]})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-500/10",children:(0,b.jsx)(k.FileText,{className:"h-6 w-6 text-orange-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Ventas a Crédito"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(T/R*100||0).toFixed(1),"% del total"]})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:["$",(0,v.formatCurrency)(T)]})})]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Ventas por Día"}),(0,b.jsx)(d.CardDescription,{children:"Últimos días del período"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:Object.entries(Q).slice(-7).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[c.transacciones," transacciones"]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-bold text-primary",children:["$",(0,v.formatCurrency)(c.total)]}),V&&(0,b.jsxs)("p",{className:"text-sm text-[#D4AF37]",children:["+$",(0,v.formatCurrency)(c.utilidad)]})]})]},a))})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Productos Más Vendidos"}),(0,b.jsx)(d.CardDescription,{children:"Top 10 productos por volumen de ventas"})]}),(0,b.jsx)(d.CardContent,{className:"overflow-x-auto",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Posición"}),(0,b.jsx)(j.TableHead,{children:"Producto"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Cantidad"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Ventas"}),V&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.TableHead,{className:"text-right",children:"Costo"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Utilidad"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Margen"})]})]})}),(0,b.jsx)(j.TableBody,{children:O.map((a,c)=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)(i.Badge,{variant:c<3?"default":"secondary",children:["#",c+1]})}),(0,b.jsx)(j.TableCell,{className:"font-medium",children:a.producto.nombre}),(0,b.jsx)(j.TableCell,{className:"text-right",children:a.cantidad}),(0,b.jsxs)(j.TableCell,{className:"text-right font-semibold",children:["$",(0,v.formatCurrency)(a.totalVenta)]}),V&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(j.TableCell,{className:"text-right text-muted-foreground",children:["$",(0,v.formatCurrency)(a.totalCosto)]}),(0,b.jsxs)(j.TableCell,{className:"text-right font-semibold text-[#D4AF37]",children:["$",(0,v.formatCurrency)(a.utilidad)]}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsxs)(i.Badge,{variant:"outline",children:[(a.utilidad/a.totalVenta*100).toFixed(1),"%"]})})]})]},a.producto.id))})]})})]}),V&&(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Productos Más Rentables"}),(0,b.jsx)(d.CardDescription,{children:"Top 10 productos por utilidad generada"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Posición"}),(0,b.jsx)(j.TableHead,{children:"Producto"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Utilidad"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Margen"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Cantidad"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Total Ventas"})]})}),(0,b.jsx)(j.TableBody,{children:P.map((a,c)=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)(i.Badge,{className:"bg-[#D4AF37]",children:["#",c+1]})}),(0,b.jsx)(j.TableCell,{className:"font-medium",children:a.producto.nombre}),(0,b.jsxs)(j.TableCell,{className:"text-right font-bold text-[#D4AF37]",children:["$",(0,v.formatCurrency)(a.utilidad)]}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsxs)(i.Badge,{variant:"outline",children:[(a.utilidad/a.totalVenta*100).toFixed(1),"%"]})}),(0,b.jsx)(j.TableCell,{className:"text-right",children:a.cantidad}),(0,b.jsxs)(j.TableCell,{className:"text-right font-semibold",children:["$",(0,v.formatCurrency)(a.totalVenta)]})]},a.producto.id))})]})})]})]}):null}a.s(["ReportesContent",()=>w],44151)}];

//# sourceMappingURL=components_reportes-content_tsx_dfe66b9a._.js.map