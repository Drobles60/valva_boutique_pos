module.exports=[52100,a=>{"use strict";var b=a.i(64781),c=a.i(39793),d=a.i(89982),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(54161),j=a.i(88237),k=a.i(65733),l=a.i(87682),m=a.i(90542),n=a.i(84980),o=a.i(31798),p=a.i(6665),q=a.i(84435),r=a.i(96826),s=a.i(61237);let t=(0,s.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),u=(0,s.default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var v=a.i(12582),w=a.i(62946),x=a.i(94480),y=a.i(14776),z=a.i(80435);function A({permission:a,children:c,fallback:d=null}){return!function(a){let{data:b}=(0,y.useSession)();return!!b?.user?.rol&&(0,z.hasPermission)(b.user.rol,a)}(a)?(0,b.jsx)(b.Fragment,{children:d}):(0,b.jsx)(b.Fragment,{children:c})}var B=a.i(9606),C=a.i(59848);function D(){let[a,s]=(0,d.useState)([]),[y,D]=(0,d.useState)(!0),[E,F]=(0,d.useState)(!1),[G,H]=(0,d.useState)(!1),[I,J]=(0,d.useState)(null),[K,L]=(0,d.useState)(null),[M,N]=(0,d.useState)(!1),[O,P]=(0,d.useState)({username:"",email:"",password:"",nombre:"",apellido:"",telefono:"",rol:"vendedor",estado:"activo"}),[Q,R]=(0,d.useState)({}),[S,T]=(0,d.useState)(!1),[U,V]=(0,d.useState)(!1),[W,X]=(0,d.useState)(null),[Y,Z]=(0,d.useState)({username:"",email:"",password:"",nombre:"",apellido:"",telefono:"",rol:"vendedor",estado:"activo"}),[$,_]=(0,d.useState)({}),[aa,ab]=(0,d.useState)(!1);(0,d.useEffect)(()=>{ac()},[]);let ac=async()=>{try{D(!0);let a=await fetch("/api/usuarios");if(401===a.status){window.location.href="/login";return}if(!a.ok){let b=await a.json();throw Error(b.error||"Error al cargar usuarios")}let b=await a.json();s(b)}catch(a){console.error("Error:",a),B.toast.error("Error al cargar",{description:a.message||"No se pudieron cargar los usuarios",icon:(0,b.jsx)(u,{className:"h-5 w-5"})})}finally{D(!1)}},ad=async a=>{let c;if(a.preventDefault(),c={},O.username.trim()?O.username.length<3&&(c.username="El username debe tener al menos 3 caracteres"):c.username="El username es obligatorio",O.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.email)||(c.email="Email inválido"):c.email="El email es obligatorio",O.password?O.password.length<4&&(c.password="La contraseña debe tener al menos 4 caracteres"):c.password="La contraseña es obligatoria",O.nombre.trim()||(c.nombre="El nombre es obligatorio"),O.apellido.trim()||(c.apellido="El apellido es obligatorio"),R(c),0===Object.keys(c).length)try{T(!0);let a={username:O.username.trim(),email:O.email.trim(),password:O.password.trim(),nombre:O.nombre.trim(),apellido:O.apellido.trim(),telefono:O.telefono?.trim()||null,rol:O.rol,estado:"activo"},c=await fetch("/api/usuarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),d=await c.json();if(!c.ok)throw Error(d.error||"Error al crear usuario");B.toast.success("¡Usuario creado!",{description:`${O.nombre} ${O.apellido} ha sido agregado exitosamente`,icon:(0,b.jsx)(t,{className:"h-5 w-5"}),duration:4e3}),ac(),af()}catch(a){console.error("Error:",a),B.toast.error("Error al crear usuario",{description:a.message||"No se pudo crear el usuario. Por favor intenta nuevamente",icon:(0,b.jsx)(u,{className:"h-5 w-5"}),duration:5e3})}finally{T(!1)}},ae=async a=>{let c;if(a.preventDefault(),c={},Y.username.trim()?Y.username.length<3&&(c.username="El username debe tener al menos 3 caracteres"):c.username="El username es obligatorio",Y.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y.email)||(c.email="Email inválido"):c.email="El email es obligatorio",Y.password&&Y.password.length<4&&(c.password="La contraseña debe tener al menos 4 caracteres"),Y.nombre.trim()||(c.nombre="El nombre es obligatorio"),Y.apellido.trim()||(c.apellido="El apellido es obligatorio"),_(c),0===Object.keys(c).length&&W)try{ab(!0);let a={username:Y.username.trim(),email:Y.email.trim(),nombre:Y.nombre.trim(),apellido:Y.apellido.trim(),telefono:Y.telefono?.trim()||null,rol:Y.rol,estado:Y.estado||"activo"},c=Y.password?.trim();c&&c.length>0&&(a.password=c);let d=await fetch(`/api/usuarios/${W.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),e=await d.json();if(!d.ok)throw Error(e.error||"Error al actualizar usuario");B.toast.success("¡Usuario actualizado!",{description:`Los datos de ${Y.nombre} ${Y.apellido} han sido actualizados`,icon:(0,b.jsx)(t,{className:"h-5 w-5"}),duration:4e3}),ac(),ag()}catch(a){console.error("Error:",a),B.toast.error("Error al actualizar",{description:a.message||"No se pudieron guardar los cambios. Por favor intenta nuevamente",icon:(0,b.jsx)(u,{className:"h-5 w-5"}),duration:5e3})}finally{ab(!1)}},af=()=>{N(!1),P({username:"",email:"",password:"",nombre:"",apellido:"",telefono:"",rol:"vendedor",estado:"activo"}),R({})},ag=()=>{V(!1),X(null),Z({username:"",email:"",password:"",nombre:"",apellido:"",telefono:"",rol:"vendedor",estado:"activo"}),_({})},ah=async()=>{if(!I)return;let a="activo"===I.estado?"inactivo":"activo",c="activo"===a?"activar":"desactivar";try{let d=await fetch(`/api/usuarios/${I.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:a})}),e=await d.json();if(!d.ok)throw Error(e.error||`Error al ${c} usuario`);B.toast.success(`Usuario ${"activo"===a?"activado":"desactivado"}`,{description:`${I.nombre} ${I.apellido} ha sido ${"activo"===a?"activado":"desactivado"}`,icon:(0,b.jsx)(t,{className:"h-5 w-5"}),duration:4e3}),ac(),J(null)}catch(a){console.error("Error:",a),B.toast.error(`Error al ${c}`,{description:a.message||`No se pudo ${c} el usuario. Por favor intenta nuevamente`,icon:(0,b.jsx)(u,{className:"h-5 w-5"}),duration:5e3})}},ai=async()=>{if(K)try{let a=await fetch(`/api/usuarios/${K.id}?permanente=true`,{method:"DELETE"}),c=await a.json();if(!a.ok)throw Error(c.error||"Error al eliminar usuario");B.toast.success("Usuario eliminado",{description:`${K.nombre} ${K.apellido} ha sido eliminado permanentemente del sistema`,icon:(0,b.jsx)(t,{className:"h-5 w-5"}),duration:4e3}),ac(),L(null)}catch(a){console.error("Error:",a),B.toast.error("Error al eliminar",{description:a.message||"No se pudo eliminar el usuario. Por favor intenta nuevamente",icon:(0,b.jsx)(u,{className:"h-5 w-5"}),duration:5e3})}},aj=a.filter(a=>"activo"===a.estado).length,ak=a.filter(a=>"administrador"===a.rol).length,al=a.filter(a=>"vendedor"===a.rol).length;return(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(c.SidebarToggle,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Usuarios del Sistema"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Gestión de usuarios y roles"})]})]}),(0,b.jsx)(A,{permission:"usuarios.crear",children:(0,b.jsxs)(f.Button,{onClick:()=>{P({username:"",email:"",password:"",nombre:"",apellido:"",telefono:"",rol:"vendedor",estado:"activo"}),R({}),N(!0)},className:"w-full md:w-auto",children:[(0,b.jsx)(n.Plus,{className:"mr-2 h-4 w-4"}),"Nuevo Usuario"]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total Usuarios"}),(0,b.jsx)(p.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.length})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Usuarios Activos"}),(0,b.jsx)(m.Shield,{className:"h-4 w-4 text-green-500"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:aj})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Administradores"}),(0,b.jsx)(m.Shield,{className:"h-4 w-4 text-red-500"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:ak})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Vendedores"}),(0,b.jsx)(m.Shield,{className:"h-4 w-4 text-blue-500"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:al})})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Lista de Usuarios"}),(0,b.jsx)(e.CardDescription,{children:"Administra los usuarios del sistema"})]}),(0,b.jsx)(e.CardContent,{children:y?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(q.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===a.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No hay usuarios registrados"}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Usuario"}),(0,b.jsx)(j.TableHead,{children:"Nombre Completo"}),(0,b.jsx)(j.TableHead,{children:"Email"}),(0,b.jsx)(j.TableHead,{children:"Teléfono"}),(0,b.jsx)(j.TableHead,{children:"Rol"}),(0,b.jsx)(j.TableHead,{children:"Estado"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,b.jsx)(j.TableBody,{children:a.map(a=>{var c,d;let e;return(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{className:"font-medium",children:a.username}),(0,b.jsxs)(j.TableCell,{children:[a.nombre," ",a.apellido]}),(0,b.jsx)(j.TableCell,{children:a.email}),(0,b.jsx)(j.TableCell,{children:a.telefono||"-"}),(0,b.jsx)(j.TableCell,{children:(c=a.rol,(e=z.ROLE_INFO[c])?(0,b.jsx)(i.Badge,{className:e.color,children:e.nombre}):(0,b.jsx)(i.Badge,{children:c}))}),(0,b.jsx)(j.TableCell,{children:(d=a.estado,({activo:(0,b.jsx)(i.Badge,{className:"bg-green-500",children:"Activo"}),inactivo:(0,b.jsx)(i.Badge,{variant:"secondary",children:"Inactivo"}),suspendido:(0,b.jsx)(i.Badge,{variant:"destructive",children:"Suspendido"})})[d]||(0,b.jsx)(i.Badge,{children:d}))}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(A,{permission:"usuarios.editar",children:(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>{X(a),Z({username:a.username,email:a.email,password:"",nombre:a.nombre,apellido:a.apellido,telefono:a.telefono||"",rol:a.rol,estado:a.estado}),_({}),V(!0)},title:"Editar usuario",children:(0,b.jsx)(o.Edit,{className:"h-4 w-4"})})}),(0,b.jsx)(A,{permission:"usuarios.editar",children:"admin"!==a.username&&(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>{J(a),F(!0)},title:"activo"===a.estado?"Desactivar usuario":"Activar usuario",className:"inactivo"===a.estado?"text-green-600 hover:text-green-700":"",children:"activo"===a.estado?(0,b.jsx)(w.Ban,{className:"h-4 w-4"}):(0,b.jsx)(x.Check,{className:"h-4 w-4"})})}),(0,b.jsx)(A,{permission:"usuarios.eliminar",children:"admin"!==a.username&&(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>{"admin"===a.username?B.toast.warning("Acción no permitida",{description:"No se puede eliminar el usuario administrador principal",icon:(0,b.jsx)(v.AlertCircle,{className:"h-5 w-5"}),duration:4e3}):(L(a),H(!0))},title:"Eliminar usuario permanentemente",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,b.jsx)(r.Trash2,{className:"h-4 w-4"})})})]})})]},a.id)})})]})})})]}),(0,b.jsx)(k.Dialog,{open:M,onOpenChange:af,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Nuevo Usuario"}),(0,b.jsx)(k.DialogDescription,{children:"Completa el formulario para crear un nuevo usuario"})]}),(0,b.jsxs)("form",{onSubmit:ad,children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"create-username",children:"Username *"}),(0,b.jsx)(g.Input,{id:"create-username",value:O.username,onChange:a=>P({...O,username:a.target.value}),placeholder:"usuario123",disabled:S}),Q.username&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:Q.username})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"create-nombre",children:"Nombre *"}),(0,b.jsx)(g.Input,{id:"create-nombre",value:O.nombre,onChange:a=>P({...O,nombre:a.target.value}),placeholder:"Juan",disabled:S}),Q.nombre&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:Q.nombre})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"create-apellido",children:"Apellido *"}),(0,b.jsx)(g.Input,{id:"create-apellido",value:O.apellido,onChange:a=>P({...O,apellido:a.target.value}),placeholder:"Pérez",disabled:S}),Q.apellido&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:Q.apellido})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"create-email",children:"Email *"}),(0,b.jsx)(g.Input,{id:"create-email",type:"email",value:O.email,onChange:a=>P({...O,email:a.target.value}),placeholder:"usuario@ejemplo.com",disabled:S}),Q.email&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:Q.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"create-telefono",children:"Teléfono"}),(0,b.jsx)(g.Input,{id:"create-telefono",value:O.telefono,onChange:a=>P({...O,telefono:a.target.value}),placeholder:"0999999999",disabled:S})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"create-password",children:"Contraseña *"}),(0,b.jsx)(g.Input,{id:"create-password",type:"password",value:O.password,onChange:a=>P({...O,password:a.target.value}),placeholder:"••••••••",disabled:S}),Q.password&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:Q.password})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"create-rol",children:"Rol *"}),(0,b.jsxs)(l.Select,{value:O.rol,onValueChange:a=>P({...O,rol:a}),disabled:S,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"administrador",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:"Administrador"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:z.ROLE_INFO.administrador.descripcion})]})}),(0,b.jsx)(l.SelectItem,{value:"vendedor",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:"Vendedor"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:z.ROLE_INFO.vendedor.descripcion})]})})]})]})]})]}),(0,b.jsxs)(k.DialogFooter,{className:"mt-6",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:af,disabled:S,children:"Cancelar"}),(0,b.jsxs)(f.Button,{type:"submit",disabled:S,children:[S&&(0,b.jsx)(q.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Crear Usuario"]})]})]})]})}),(0,b.jsx)(k.Dialog,{open:U,onOpenChange:ag,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Editar Usuario"}),(0,b.jsx)(k.DialogDescription,{children:"Modifica los datos del usuario"})]}),(0,b.jsxs)("form",{onSubmit:ae,children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"edit-username",children:"Username *"}),(0,b.jsx)(g.Input,{id:"edit-username",value:Y.username,onChange:a=>Z({...Y,username:a.target.value}),placeholder:"usuario123",disabled:aa}),$.username&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:$.username})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"edit-nombre",children:"Nombre *"}),(0,b.jsx)(g.Input,{id:"edit-nombre",value:Y.nombre,onChange:a=>Z({...Y,nombre:a.target.value}),placeholder:"Juan",disabled:aa}),$.nombre&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:$.nombre})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"edit-apellido",children:"Apellido *"}),(0,b.jsx)(g.Input,{id:"edit-apellido",value:Y.apellido,onChange:a=>Z({...Y,apellido:a.target.value}),placeholder:"Pérez",disabled:aa}),$.apellido&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:$.apellido})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"edit-email",children:"Email *"}),(0,b.jsx)(g.Input,{id:"edit-email",type:"email",value:Y.email,onChange:a=>Z({...Y,email:a.target.value}),placeholder:"usuario@ejemplo.com",disabled:aa}),$.email&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:$.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"edit-telefono",children:"Teléfono"}),(0,b.jsx)(g.Input,{id:"edit-telefono",value:Y.telefono,onChange:a=>Z({...Y,telefono:a.target.value}),placeholder:"0999999999",disabled:aa})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"edit-password",children:"Contraseña (dejar vacío para no cambiar)"}),(0,b.jsx)(g.Input,{id:"edit-password",type:"password",value:Y.password,onChange:a=>Z({...Y,password:a.target.value}),placeholder:"••••••••",disabled:aa}),$.password&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:$.password})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"edit-rol",children:"Rol *"}),(0,b.jsxs)(l.Select,{value:Y.rol,onValueChange:a=>Z({...Y,rol:a}),disabled:aa,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"administrador",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:"Administrador"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:z.ROLE_INFO.administrador.descripcion})]})}),(0,b.jsx)(l.SelectItem,{value:"vendedor",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:"Vendedor"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:z.ROLE_INFO.vendedor.descripcion})]})})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"edit-estado",children:"Estado"}),(0,b.jsxs)(l.Select,{value:Y.estado,onValueChange:a=>Z({...Y,estado:a}),disabled:aa,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"activo",children:"Activo"}),(0,b.jsx)(l.SelectItem,{value:"inactivo",children:"Inactivo"}),(0,b.jsx)(l.SelectItem,{value:"suspendido",children:"Suspendido"})]})]})]})]}),(0,b.jsxs)(k.DialogFooter,{className:"mt-6",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:ag,disabled:aa,children:"Cancelar"}),(0,b.jsxs)(f.Button,{type:"submit",disabled:aa,children:[aa&&(0,b.jsx)(q.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Actualizar Usuario"]})]})]})]})}),(0,b.jsx)(C.ConfirmDialog,{open:E,onOpenChange:F,onConfirm:ah,title:I?.estado==="activo"?"¿Desactivar usuario?":"¿Activar usuario?",description:I?.estado==="activo"?`\xbfEst\xe1s seguro de desactivar a ${I?.nombre}? El usuario no podr\xe1 acceder al sistema hasta que sea reactivado.`:`\xbfEst\xe1s seguro de activar a ${I?.nombre}? El usuario podr\xe1 acceder nuevamente al sistema.`,confirmText:I?.estado==="activo"?"Desactivar":"Activar",cancelText:"Cancelar",variant:(I?.estado,"default")}),(0,b.jsx)(C.ConfirmDialog,{open:G,onOpenChange:H,onConfirm:ai,title:"⚠️ ¿Eliminar usuario permanentemente?",description:`Est\xe1s a punto de eliminar permanentemente a ${K?.nombre} ${K?.apellido} del sistema. Esta acci\xf3n no se puede deshacer y se perder\xe1n todos los datos asociados a este usuario.`,confirmText:"Eliminar permanentemente",cancelText:"Cancelar",variant:"destructive"})]})}var E=a.i(14727),F=a.i(8490);function G(){let{data:a,status:e}=(0,y.useSession)(),f=(0,F.useRouter)();return((0,d.useEffect)(()=>{"unauthenticated"===e&&f.push("/login")},[e,f]),"loading"===e)?(0,b.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),(0,b.jsx)("p",{children:"Cargando..."})]})}):a?(0,b.jsxs)(E.SidebarProvider,{children:[(0,b.jsx)(c.AppSidebar,{}),(0,b.jsx)(E.SidebarInset,{children:(0,b.jsx)(D,{})})]}):null}a.s(["default",()=>G],52100)}];

//# sourceMappingURL=app_usuarios_page_tsx_efe863cc._.js.map