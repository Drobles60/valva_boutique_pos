module.exports=[23378,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(54161),i=a.i(88237),j=a.i(65733),k=a.i(83796),l=a.i(84980),m=a.i(7085),n=a.i(31798),o=a.i(96826),p=a.i(99009),q=a.i(96926),r=a.i(77577),s=a.i(39793),t=a.i(59848),u=a.i(9606);function v(){let[a,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)({codigo:"",nombre:"",referencia:"",categoria:"",cantidad:"",precioCosto:"",precioVentaPublico:"",precioMayorista:"",precioEspecial:"",stockMinimo:"",proveedor:""});(0,c.useEffect)(()=>{F(!0),D((0,r.getCurrentUser)()),M()},[]);let M=()=>{v((0,r.getProducts)())},N=()=>{z(!1),B(null),L({codigo:"",nombre:"",referencia:"",categoria:"",cantidad:"",precioCosto:"",precioVentaPublico:"",precioMayorista:"",precioEspecial:"",stockMinimo:"",proveedor:""})},O=(a,b)=>a&&b?((b-a)/a*100).toFixed(2):"0",P=a.filter(a=>a.nombre.toLowerCase().includes(w.toLowerCase())||a.codigo.toLowerCase().includes(w.toLowerCase())||a.referencia.toLowerCase().includes(w.toLowerCase())||a.categoria.toLowerCase().includes(w.toLowerCase())),Q=a.reduce((a,b)=>a+b.cantidad*b.precioCosto,0),R=a.length,S=a.filter(a=>a.stockMinimo&&a.cantidad<=a.stockMinimo).length,T=C?.rol==="administrador",U=C?.rol==="administrador";return(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,b.jsx)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.SidebarToggle,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Gestión de Productos"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Administra tu inventario de productos"})]})]})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Total Productos"}),(0,b.jsx)(k.Package,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:R}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[S," con stock bajo"]})]})]}),E&&T&&(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Valor Inventario"}),(0,b.jsx)(q.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["$",Q.toLocaleString()]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Costo total"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Margen Promedio"}),(0,b.jsx)(p.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[a.length>0?String((a.reduce((a,b)=>a+Number.parseFloat(O(b.precioCosto,b.precioVentaPublico)),0)/a.length).toFixed(1)):"0","%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Rentabilidad"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"Buscar productos...",value:w,onChange:a=>x(a.target.value),className:"pl-9"})]}),E&&U&&(0,b.jsxs)(e.Button,{onClick:()=>z(!0),className:"w-full md:w-auto",children:[(0,b.jsx)(l.Plus,{className:"mr-2 h-4 w-4"}),"Nuevo Producto"]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Inventario de Productos"}),(0,b.jsx)(d.CardDescription,{children:"Gestión de productos con múltiples precios"})]}),(0,b.jsx)(d.CardContent,{className:"overflow-x-auto",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Producto"}),(0,b.jsx)(i.TableHead,{className:"hidden md:table-cell",children:"Código"}),(0,b.jsx)(i.TableHead,{className:"hidden lg:table-cell",children:"Referencia"}),(0,b.jsx)(i.TableHead,{className:"hidden sm:table-cell",children:"Categoría"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Stock"}),E&&T&&(0,b.jsx)(i.TableHead,{className:"hidden xl:table-cell text-right",children:"Costo"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"P. Público"}),(0,b.jsx)(i.TableHead,{className:"hidden lg:table-cell text-right",children:"P. Mayorista"}),(0,b.jsx)(i.TableHead,{className:"hidden xl:table-cell text-right",children:"P. Especial"}),E&&T&&(0,b.jsx)(i.TableHead,{className:"hidden 2xl:table-cell text-right",children:"Margen"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,b.jsx)(i.TableBody,{children:P.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.nombre}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground md:hidden",children:a.codigo})]})}),(0,b.jsx)(i.TableCell,{className:"hidden md:table-cell font-medium",children:a.codigo}),(0,b.jsx)(i.TableCell,{className:"hidden lg:table-cell",children:a.referencia}),(0,b.jsx)(i.TableCell,{className:"hidden sm:table-cell",children:(0,b.jsx)(h.Badge,{variant:"outline",children:a.categoria})}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsx)("span",{className:a.stockMinimo&&a.cantidad<=a.stockMinimo?"text-red-600 font-semibold":"",children:a.cantidad})}),E&&T&&(0,b.jsxs)(i.TableCell,{className:"hidden xl:table-cell text-right",children:["$",a.precioCosto.toLocaleString()]}),(0,b.jsxs)(i.TableCell,{className:"text-right",children:["$",a.precioVentaPublico.toLocaleString()]}),(0,b.jsxs)(i.TableCell,{className:"hidden lg:table-cell text-right",children:["$",a.precioMayorista.toLocaleString()]}),(0,b.jsxs)(i.TableCell,{className:"hidden xl:table-cell text-right",children:["$",a.precioEspecial.toLocaleString()]}),E&&T&&(0,b.jsx)(i.TableCell,{className:"hidden 2xl:table-cell text-right",children:(0,b.jsxs)(h.Badge,{variant:"secondary",children:[O(a.precioCosto,a.precioVentaPublico),"%"]})}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsx)("div",{className:"flex justify-end gap-1",children:E&&U&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{B(a),L({codigo:a.codigo,nombre:a.nombre,referencia:a.referencia,categoria:a.categoria,cantidad:a.cantidad.toString(),precioCosto:a.precioCosto.toString(),precioVentaPublico:a.precioVentaPublico.toString(),precioMayorista:a.precioMayorista.toString(),precioEspecial:a.precioEspecial.toString(),stockMinimo:a.stockMinimo?.toString()||"",proveedor:a.proveedor||""}),z(!0)},children:(0,b.jsx)(n.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{J(a.id),H(!0)},children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]})})})]},a.id))})]})})]}),(0,b.jsx)(j.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(j.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:A?"Editar Producto":"Nuevo Producto"}),(0,b.jsx)(j.DialogDescription,{children:"Complete la información del producto con los tres precios de venta"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault();let b={id:A?.id||Date.now().toString(),codigo:K.codigo,nombre:K.nombre,referencia:K.referencia,categoria:K.categoria,cantidad:Number.parseFloat(K.cantidad),precioCosto:Number.parseFloat(K.precioCosto),precioVentaPublico:Number.parseFloat(K.precioVentaPublico),precioMayorista:Number.parseFloat(K.precioMayorista),precioEspecial:Number.parseFloat(K.precioEspecial),stockMinimo:K.stockMinimo?Number.parseFloat(K.stockMinimo):void 0,proveedor:K.proveedor||void 0,createdAt:A?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};(0,r.saveProduct)(b),M(),N()},children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"codigo",children:"Código *"}),(0,b.jsx)(f.Input,{id:"codigo",value:K.codigo,onChange:a=>L({...K,codigo:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"referencia",children:"Referencia (Código de Barras) *"}),(0,b.jsx)(f.Input,{id:"referencia",value:K.referencia,onChange:a=>L({...K,referencia:a.target.value}),required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"nombre",children:"Nombre del Producto *"}),(0,b.jsx)(f.Input,{id:"nombre",value:K.nombre,onChange:a=>L({...K,nombre:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"categoria",children:"Categoría *"}),(0,b.jsx)(f.Input,{id:"categoria",value:K.categoria,onChange:a=>L({...K,categoria:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"proveedor",children:"Proveedor"}),(0,b.jsx)(f.Input,{id:"proveedor",value:K.proveedor,onChange:a=>L({...K,proveedor:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"cantidad",children:"Cantidad en Stock *"}),(0,b.jsx)(f.Input,{id:"cantidad",type:"number",step:"0.01",value:K.cantidad,onChange:a=>L({...K,cantidad:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"stockMinimo",children:"Stock Mínimo"}),(0,b.jsx)(f.Input,{id:"stockMinimo",type:"number",step:"0.01",value:K.stockMinimo,onChange:a=>L({...K,stockMinimo:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsx)("h4",{className:"font-semibold mb-3 text-[#D4AF37]",children:"Precios"}),(0,b.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,b.jsx)(g.Label,{htmlFor:"precioCosto",children:"Precio Costo *"}),(0,b.jsx)(f.Input,{id:"precioCosto",type:"number",step:"0.01",value:K.precioCosto,onChange:a=>L({...K,precioCosto:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"precioVentaPublico",children:"Precio Público *"}),(0,b.jsx)(f.Input,{id:"precioVentaPublico",type:"number",step:"0.01",value:K.precioVentaPublico,onChange:a=>L({...K,precioVentaPublico:a.target.value}),required:!0}),K.precioCosto&&K.precioVentaPublico&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Margen:"," ",O(Number.parseFloat(K.precioCosto),Number.parseFloat(K.precioVentaPublico)),"%"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"precioMayorista",children:"Precio Mayorista *"}),(0,b.jsx)(f.Input,{id:"precioMayorista",type:"number",step:"0.01",value:K.precioMayorista,onChange:a=>L({...K,precioMayorista:a.target.value}),required:!0}),K.precioCosto&&K.precioMayorista&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Margen:"," ",O(Number.parseFloat(K.precioCosto),Number.parseFloat(K.precioMayorista)),"%"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"precioEspecial",children:"Precio Especial *"}),(0,b.jsx)(f.Input,{id:"precioEspecial",type:"number",step:"0.01",value:K.precioEspecial,onChange:a=>L({...K,precioEspecial:a.target.value}),required:!0}),K.precioCosto&&K.precioEspecial&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Margen:"," ",O(Number.parseFloat(K.precioCosto),Number.parseFloat(K.precioEspecial)),"%"]})]})]})]})]}),(0,b.jsxs)(j.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:N,children:"Cancelar"}),(0,b.jsx)(e.Button,{type:"submit",children:A?"Guardar Cambios":"Agregar Producto"})]})]})]})}),(0,b.jsx)(t.ConfirmDialog,{open:G,onOpenChange:H,onConfirm:()=>{I&&((0,r.deleteProduct)(I),M(),u.toast.success("Producto eliminado",{description:"El producto ha sido eliminado del inventario"}),J(null))},title:"¿Eliminar producto?",description:"Esta acción eliminará permanentemente este producto del inventario. Esta acción no se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar",variant:"destructive"})]})}a.s(["ProductosContent",()=>v])}];

//# sourceMappingURL=components_productos-content_tsx_018c1c77._.js.map