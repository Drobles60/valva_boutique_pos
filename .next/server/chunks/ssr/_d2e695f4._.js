module.exports=[17171,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(32848),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],17171)},54161,a=>{"use strict";var b=a.i(64781),c=a.i(3339),d=a.i(42261),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},2215,a=>{"use strict";let b=(0,a.i(61237).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},42078,a=>{"use strict";var b=a.i(89982);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},87055,a=>{"use strict";let b=()=>({url:"",eventos:[],activo:!1}),c=async(a,c)=>{let d=b();if(!d.activo||!d.url||!d.eventos.includes(a))return void console.log("[v0] Webhook not configured or event not enabled:",a);try{let b=await fetch(d.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:a,data:c,timestamp:new Date().toISOString()})});b.ok?console.log("[v0] Webhook sent successfully:",a):console.error("[v0] Webhook failed:",b.statusText)}catch(a){console.error("[v0] Webhook error:",a)}};a.s(["enviarWebhook",0,c,"getWebhookConfig",0,b,"saveWebhookConfig",0,a=>{}])},94480,a=>{"use strict";var b=a.i(2215);a.s(["Check",()=>b.default])},12582,a=>{"use strict";let b=(0,a.i(61237).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],12582)},32267,a=>{"use strict";var b=a.i(31293);a.s(["X",()=>b.default])},56237,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(38032),i=a.i(58959),j=a.i(94202),k=a.i(49274),l=a.i(42078),m=a.i(97530),n=a.i(32848),o="Switch",[p,q]=(0,j.createContextScope)(o),[r,s]=p(o),t=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:f,checked:g,defaultChecked:j,required:l,disabled:m,value:o="on",onCheckedChange:p,form:q,...s}=a,[t,u]=c.useState(null),v=(0,i.useComposedRefs)(d,a=>u(a)),y=c.useRef(!1),z=!t||q||!!t.closest("form"),[A=!1,B]=(0,k.useControllableState)({prop:g,defaultProp:j,onChange:p});return(0,b.jsxs)(r,{scope:e,checked:A,disabled:m,children:[(0,b.jsx)(n.Primitive.button,{type:"button",role:"switch","aria-checked":A,"aria-required":l,"data-state":x(A),"data-disabled":m?"":void 0,disabled:m,value:o,...s,ref:v,onClick:(0,h.composeEventHandlers)(a.onClick,a=>{B(a=>!a),z&&(y.current=a.isPropagationStopped(),y.current||a.stopPropagation())})}),z&&(0,b.jsx)(w,{control:t,bubbles:!y.current,name:f,value:o,checked:A,required:l,disabled:m,form:q,style:{transform:"translateX(-100%)"}})]})});t.displayName=o;var u="SwitchThumb",v=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=s(u,d);return(0,b.jsx)(n.Primitive.span,{"data-state":x(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});v.displayName=u;var w=a=>{let{control:d,checked:e,bubbles:f=!0,...g}=a,h=c.useRef(null),i=(0,l.usePrevious)(e),j=(0,m.useSize)(d);return c.useEffect(()=>{let a=h.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[i,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:h,style:{...a.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function x(a){return a?"checked":"unchecked"}var y=a.i(97895);function z({className:a,...c}){return(0,b.jsx)(t,{"data-slot":"switch",className:(0,y.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(v,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}var A=a.i(54161),B=a.i(14727);let C=(0,a.i(61237).default)("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);var D=a.i(94480),E=a.i(32267),F=a.i(12582),G=a.i(87055),H=a.i(9606);function I(){let[a,h]=c.useState({url:"",eventos:[],activo:!1}),[i,j]=c.useState("idle");c.useEffect(()=>{h((0,G.getWebhookConfig)())},[]);let k=async()=>{if(!a.url)return void H.toast.error("URL requerida",{description:"Por favor ingrese una URL de webhook válida"});j("testing");try{(await fetch(a.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"test",data:{message:"Test desde Valva POS",timestamp:new Date().toISOString()}})})).ok?j("success"):j("error"),setTimeout(()=>j("idle"),3e3)}catch(a){console.error("[v0] Test webhook error:",a),j("error"),setTimeout(()=>j("idle"),3e3)}};return(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(B.SidebarTrigger,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Configuración de Webhooks"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Integración con n8n y otros servicios"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{children:"Webhook Principal"}),(0,b.jsx)(d.CardDescription,{children:"Configure la URL de su flujo de n8n o servicio externo"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Label,{htmlFor:"webhook-activo",children:"Activo"}),(0,b.jsx)(z,{id:"webhook-activo",checked:a.activo,onCheckedChange:b=>{let c={...a,activo:b};h(c),(0,G.saveWebhookConfig)(c)}})]})]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"webhook-url",children:"URL del Webhook"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Input,{id:"webhook-url",placeholder:"https://tu-dominio.app.n8n.cloud/webhook/valva-pos",value:a.url,onChange:b=>h({...a,url:b.target.value})}),(0,b.jsx)(e.Button,{onClick:()=>{(0,G.saveWebhookConfig)(a),H.toast.success("Configuración guardada",{description:"Los cambios se han guardado correctamente"})},children:"Guardar"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ingrese la URL de su webhook de n8n o cualquier servicio compatible"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:k,disabled:"testing"===i||!a.url,children:[(0,b.jsx)(C,{className:"mr-2 h-4 w-4"}),"testing"===i?"Probando...":"Probar Webhook"]}),"success"===i&&(0,b.jsxs)(A.Badge,{className:"bg-green-500",children:[(0,b.jsx)(D.Check,{className:"h-3 w-3 mr-1"}),"Conexión exitosa"]}),"error"===i&&(0,b.jsxs)(A.Badge,{variant:"destructive",children:[(0,b.jsx)(E.X,{className:"h-3 w-3 mr-1"}),"Error de conexión"]})]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Eventos Disponibles"}),(0,b.jsx)(d.CardDescription,{children:"Seleccione qué eventos desea enviar al webhook"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:[{id:"nueva_venta",label:"Nueva Venta",description:"Se dispara al completar una venta"},{id:"bajo_inventario",label:"Inventario Bajo",description:"Alerta cuando un producto llega al stock mínimo"},{id:"nuevo_cliente",label:"Nuevo Cliente",description:"Se dispara al registrar un cliente"},{id:"pago_recibido",label:"Pago Recibido",description:"Se dispara al registrar un abono"}].map(c=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(z,{checked:a.eventos.includes(c.id),onCheckedChange:()=>{var b;let d,e;return b=c.id,d=a.eventos.includes(b)?a.eventos.filter(a=>a!==b):[...a.eventos,b],void(h(e={...a,eventos:d}),(0,G.saveWebhookConfig)(e))}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:c.label}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:c.description})]})]}),a.eventos.includes(c.id)&&(0,b.jsx)(A.Badge,{variant:"outline",children:"Activo"})]},c.id))})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(F.AlertCircle,{className:"h-5 w-5"}),"Información sobre Webhooks"]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-3 text-sm",children:[(0,b.jsx)("p",{children:"Los webhooks permiten enviar datos automáticamente a n8n u otros servicios cuando ocurren eventos importantes en su sistema POS."}),(0,b.jsxs)("div",{className:"rounded-lg bg-secondary p-4 space-y-2",children:[(0,b.jsx)("p",{className:"font-medium",children:"Formato de datos enviados:"}),(0,b.jsx)("pre",{className:"text-xs overflow-x-auto",children:JSON.stringify({event:"nueva_venta",data:{id:"123456",cliente:"Juan Pérez",total:15e4,estado:"completada"},timestamp:"2024-01-15T10:30:00Z"},null,2)})]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Configure un flujo de trabajo en n8n que reciba estos datos y realice las acciones que necesite, como enviar notificaciones, actualizar hojas de cálculo, o sincronizar con otros sistemas."})]})]})]})}a.s(["WebhooksConfig",()=>I],56237)}];

//# sourceMappingURL=_d2e695f4._.js.map