module.exports=[9076,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(8490),e=a.i(3130),f=a.i(40695),g=a.i(17171),h=a.i(5522),i=a.i(88237),j=a.i(54161),k=a.i(69617),l=a.i(70854),m=a.i(11374),n=a.i(53581),o=a.i(76929),p=a.i(71917),q=a.i(39793),r=a.i(62140);function s(){let a=(0,d.useRouter)(),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{t(new Date().toISOString().split("T")[0])},[]);let y=async()=>{if(s){x(!0);try{let a=await fetch(`/api/reportes/clientes/creditos?fechaCorte=${s}`),b=await a.json();v(b)}catch(a){console.error("Error cargando reporte:",a),alert("Error al cargar el reporte")}finally{x(!1)}}};return(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>a.back(),children:(0,b.jsx)(m.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsx)(q.SidebarToggle,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Cartera de CrÃ©ditos"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Cuentas por cobrar y estado de crÃ©ditos"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{if(!u)return;let a={headers:["Cliente","Total CrÃ©dito","Abonado","Saldo Pendiente","DÃ­as Vencidos","Estado"],rows:u.creditos.map(a=>[a.cliente.nombre,(0,r.formatCurrency)(a.totalCredito),(0,r.formatCurrency)(a.totalAbonado),(0,r.formatCurrency)(a.saldoPendiente),a.diasVencido.toString(),a.estado])},b={title:"Cartera de CrÃ©ditos",subtitle:"Cuentas por Cobrar",period:`Corte al ${s}`,orientation:"landscape",companyInfo:{name:"Valva Boutique",address:"Sistema POS",phone:"Reporte de Clientes"}};(0,r.exportToPDF)(a,b)},disabled:!u,children:[(0,b.jsx)(k.Download,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{if(!u)return;let a={headers:["Cliente","TelÃ©fono","Total CrÃ©dito","Abonado","Saldo Pendiente","DÃ­as Vencidos","Estado"],rows:u.creditos.map(a=>[a.cliente.nombre,a.cliente.telefono||"N/A",a.totalCredito,a.totalAbonado,a.saldoPendiente,a.diasVencido,a.estado])};(0,r.exportToExcel)(a,{title:"Cartera de CrÃ©ditos",period:`Corte al ${s}`,sheetName:"Cartera de CrÃ©ditos"})},disabled:!u,children:[(0,b.jsx)(k.Download,{className:"mr-2 h-4 w-4"}),"Excel"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Fecha de Corte"}),(0,b.jsx)(e.CardDescription,{children:"Seleccione la fecha para el anÃ¡lisis de la cartera"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"fecha-corte",children:"Fecha de Corte"}),(0,b.jsx)(h.Input,{id:"fecha-corte",type:"date",value:s,onChange:a=>t(a.target.value)})]}),(0,b.jsx)("div",{className:"flex items-end md:col-span-2",children:(0,b.jsxs)(f.Button,{className:"w-full",onClick:y,disabled:w,children:[(0,b.jsx)(l.FileText,{className:"mr-2 h-4 w-4"}),w?"Generando...":"Generar Reporte"]})})]})})]}),u&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total por Cobrar"}),(0,b.jsx)(l.FileText,{className:"h-4 w-4 text-blue-600"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(0,r.formatCurrency)(u.totalPorCobrar)}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[u.creditos.length," clientes con crÃ©dito"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Abonado"}),(0,b.jsx)(p.CheckCircle,{className:"h-4 w-4 text-green-600"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(0,r.formatCurrency)(u.totalAbonado)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Pagos recibidos"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Saldo Pendiente"}),(0,b.jsx)(o.Clock,{className:"h-4 w-4 text-orange-600"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(0,r.formatCurrency)(u.saldoPendiente)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Por cobrar"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"CrÃ©ditos Vencidos"}),(0,b.jsx)(n.AlertTriangle,{className:"h-4 w-4 text-red-600"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:u.creditosVencidos}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Requieren atenciÃ³n"})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Detalle de Cartera"}),(0,b.jsxs)(e.CardDescription,{children:["Listado completo de clientes con crÃ©dito (",u.creditos.length," registros)"]})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Cliente"}),(0,b.jsx)(i.TableHead,{children:"TelÃ©fono"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Total CrÃ©dito"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Abonado"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Saldo Pendiente"}),(0,b.jsx)(i.TableHead,{className:"text-center",children:"DÃ­as Vencidos"}),(0,b.jsx)(i.TableHead,{className:"text-center",children:"Estado"})]})}),(0,b.jsx)(i.TableBody,{children:0===u.creditos.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:7,className:"text-center text-muted-foreground",children:"No hay crÃ©ditos activos"})}):u.creditos.map((a,c)=>{var d;let e,f,g;return(0,b.jsxs)(i.TableRow,{className:`${c%2==0?"bg-muted/50":""} ${"vencido"===a.estado?"border-l-4 border-red-500":""}`,children:[(0,b.jsx)(i.TableCell,{className:"font-medium",children:a.cliente.nombre}),(0,b.jsx)(i.TableCell,{className:"text-muted-foreground",children:a.cliente.telefono||"N/A"}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,r.formatCurrency)(a.totalCredito)}),(0,b.jsx)(i.TableCell,{className:"text-right text-green-600 font-semibold",children:(0,r.formatCurrency)(a.totalAbonado)}),(0,b.jsx)(i.TableCell,{className:"text-right font-bold",children:(0,r.formatCurrency)(a.saldoPendiente)}),(0,b.jsx)(i.TableCell,{className:"text-center",children:a.diasVencido>0?(0,b.jsxs)(j.Badge,{variant:"destructive",children:[a.diasVencido," dÃ­as"]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(i.TableCell,{className:"text-center",children:(d=a.estado,g=(f=(e={al_dia:{color:"bg-green-100 text-green-800",icon:p.CheckCircle,label:"Al DÃ­a"},por_vencer:{color:"bg-yellow-100 text-yellow-800",icon:o.Clock,label:"Por Vencer"},vencido:{color:"bg-red-100 text-red-800",icon:n.AlertTriangle,label:"Vencido"}})[d]||e.al_dia).icon,(0,b.jsxs)(j.Badge,{variant:"secondary",className:`${f.color} flex items-center gap-1`,children:[(0,b.jsx)(g,{className:"h-3 w-3"}),f.label]}))})]},c)})})]})})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(e.Card,{className:"border-green-200",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"text-green-700 flex items-center gap-2",children:[(0,b.jsx)(p.CheckCircle,{className:"h-5 w-5"}),"Al DÃ­a"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-green-700",children:u.creditos.filter(a=>"al_dia"===a.estado).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Clientes sin retraso"})]})]}),(0,b.jsxs)(e.Card,{className:"border-yellow-200",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"text-yellow-700 flex items-center gap-2",children:[(0,b.jsx)(o.Clock,{className:"h-5 w-5"}),"Por Vencer"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-yellow-700",children:u.creditos.filter(a=>"por_vencer"===a.estado).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"PrÃ³ximos a vencer"})]})]}),(0,b.jsxs)(e.Card,{className:"border-red-200",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"text-red-700 flex items-center gap-2",children:[(0,b.jsx)(n.AlertTriangle,{className:"h-5 w-5"}),"Vencidos"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-red-700",children:u.creditosVencidos}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Requieren seguimiento"})]})]})]}),(0,b.jsxs)(e.Card,{className:"bg-blue-50",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-blue-900",children:"ðŸ’¡ GestiÃ³n de Cartera"})}),(0,b.jsxs)(e.CardContent,{className:"text-sm text-blue-800 space-y-2",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"CrÃ©ditos al dÃ­a:"})," Clientes que estÃ¡n cumpliendo con sus pagos segÃºn lo acordado."]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Por vencer:"})," CrÃ©ditos que estÃ¡n prÃ³ximos a su fecha de pago. Considera enviar recordatorios."]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Vencidos:"})," Clientes con pagos atrasados. Se recomienda hacer seguimiento inmediato."]}),(0,b.jsxs)("p",{className:"mt-4 font-semibold",children:["ðŸ’° Tasa de recuperaciÃ³n: ",u.totalPorCobrar>0?(u.totalAbonado/u.totalPorCobrar*100).toFixed(1):0,"%"]})]})]})]}),!u&&!w&&(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(l.FileText,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Genere el reporte"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center",children:'Seleccione la fecha de corte y haga clic en "Generar Reporte"'})]})})]})}a.s(["CreditosContent",()=>s])}];

//# sourceMappingURL=components_reportes_creditos-content_tsx_7f6e7695._.js.map