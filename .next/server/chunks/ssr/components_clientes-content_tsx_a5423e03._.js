module.exports=[71841,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(54161),i=a.i(88237),j=a.i(65733),k=a.i(87682),l=a.i(46893),m=a.i(7085),n=a.i(96926),o=a.i(33038);let p=(0,a.i(61237).default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var q=a.i(12582),r=a.i(6665),s=a.i(39793),t=a.i(9606),u=a.i(97895),v=a.i(46470);function w(){let a,w,[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)([]),[al,am]=(0,c.useState)([]),[an,ao]=(0,c.useState)(null),[ap,aq]=(0,c.useState)({monto:"",metodoPago:"efectivo",referencia:"",notas:""}),[ar,as]=(0,c.useState)({monto:"",metodoPago:"efectivo",referencia:"",notas:""});(0,c.useEffect)(()=>{at(),au()},[]),(0,c.useEffect)(()=>{at(),au()},[]);let at=async(a,b)=>{try{$(!0);let c="/api/cuentas-por-cobrar",d=new URLSearchParams;a&&d.append("fechaInicio",a),b&&d.append("fechaFin",b),d.toString()&&(c+=`?${d.toString()}`);let e=await fetch(c),f=await e.json();if(!e.ok)throw Error(f.error||"Error al cargar facturas");y(f.data||[])}catch(a){console.error("Error al cargar facturas:",a),t.toast.error("Error al cargar facturas",{description:a.message})}finally{$(!1)}},au=async()=>{try{let a=await fetch("/api/clientes/cuentas-por-cobrar"),b=await a.json();if(!a.ok)throw Error(b.error||"Error al cargar clientes");C(b.data||[])}catch(a){console.error("Error al cargar clientes:",a)}},av=async a=>{try{let b=await fetch(`/api/cuentas-por-cobrar/${a}/abonos`),c=await b.json();if(!b.ok)throw Error(c.error||"Error al cargar abonos");ak(c.data.abonos||[])}catch(a){console.error("Error al cargar abonos:",a),t.toast.error("Error al cargar historial",{description:a.message})}},aw=async(a,b,c)=>{try{let d=`/api/clientes/${a}/abonos`,e=new URLSearchParams;b&&e.append("fechaInicio",b),c&&e.append("fechaFin",c),e.toString()&&(d+=`?${e.toString()}`);let f=await fetch(d),g=await f.json();if(!f.ok)throw Error(g.error||"Error al cargar historial del cliente");ak(g.data.abonos||[]),ao(g.data.resumen||null)}catch(a){console.error("Error al cargar historial del cliente:",a),t.toast.error("Error al cargar historial del cliente",{description:a.message})}},ax=async a=>{if(a.preventDefault(),!z)return void t.toast.error("Error",{description:"No se ha seleccionado una factura"});let b=Number.parseFloat(ap.monto),c=z.saldo_pendiente;if(b<=0||b>c)return void t.toast.error("Monto inválido",{description:`El monto debe ser mayor a 0 y no puede exceder el saldo pendiente de $${(0,u.formatCurrency)(c)}`});try{$(!0);let a=localStorage.getItem("user"),c=a?JSON.parse(a):null,d={monto:b,metodo_pago:ap.metodoPago,referencia_transferencia:ap.referencia?.trim()||null,notas:ap.notas?.trim()||null,usuario_id:c?.id||null},e=await fetch(`/api/cuentas-por-cobrar/${z.id}/abonos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),f=await e.json();if(!e.ok)throw Error(f.error||"Error al registrar abono");t.toast.success("¡Abono registrado!",{description:`Se registr\xf3 un abono de $${(0,u.formatCurrency)(b)} para la factura #${z.numero_venta}`}),await at(),aC()}catch(a){console.error("Error al registrar abono:",a),t.toast.error("Error al registrar abono",{description:a.message})}finally{$(!1)}},ay=async a=>{if(a.preventDefault(),!D)return void t.toast.error("Error",{description:"No se ha seleccionado un cliente"});let b=Number.parseFloat(ar.monto),c=D.saldo_pendiente;if(b<=0||b>c)return void t.toast.error("Monto inválido",{description:`El monto debe ser mayor a 0 y no puede exceder el saldo pendiente de $${(0,u.formatCurrency)(c)}`});try{$(!0);let a=localStorage.getItem("user"),c=a?JSON.parse(a):null,d={monto:b,metodo_pago:ar.metodoPago,referencia_transferencia:ar.referencia?.trim()||null,notas:ar.notas?.trim()||null,usuario_id:c?.id||null},e=await fetch(`/api/clientes/${D.id}/abonos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),f=await e.json();if(!e.ok)throw Error(f.error||"Error al registrar abono");let g=f.data.detalle||[];am(g);let h=g.map(a=>`#${a.numero_venta}`).join(", ");t.toast.success("¡Abono distribuido exitosamente!",{description:`Se distribuyeron $${(0,u.formatCurrency)(f.data.monto_aplicado)} entre ${f.data.cuentas_afectadas} factura(s): ${h}`}),await at(),await au(),aD()}catch(a){console.error("Error al registrar abono:",a),t.toast.error("Error al registrar abono",{description:a.message})}finally{$(!1)}},az=async a=>{A(a),aa(!0)},aA=async a=>{A(a),await av(a.id),ae(!0)},aB=async a=>{E(a),await aw(a.id),ag(!0)},aC=()=>{aa(!1),A(null),aq({monto:"",metodoPago:"efectivo",referencia:"",notas:""})},aD=()=>{ac(!1),E(null),G(""),am([]),as({monto:"",metodoPago:"efectivo",referencia:"",notas:""})},aE=x.filter(a=>(0,u.normalizeText)(a.numero_venta).includes((0,u.normalizeText)(X))||(0,u.normalizeText)(a.cliente_nombre).includes((0,u.normalizeText)(X))||(0,u.normalizeText)(a.cliente_identificacion).includes((0,u.normalizeText)(X))),aF=B.filter(a=>(0,u.normalizeText)(a.nombre).includes((0,u.normalizeText)(F))||(0,u.normalizeText)(a.identificacion).includes((0,u.normalizeText)(F))),aG=x.length,aH=x.filter(a=>a.saldo_pendiente>0).length,aI=x.reduce((a,b)=>a+Number(b.saldo_pendiente),0),aJ=x.reduce((a,b)=>a+(Number(b.total_abonado)||0),0);return(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s.SidebarToggle,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Cuentas por Cobrar"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Gestión de ventas a crédito y abonos"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{onClick:()=>{ac(!0)},size:"lg",children:[(0,b.jsx)(r.Users,{className:"h-4 w-4 mr-2"}),"Abonar a Cliente"]}),(0,b.jsxs)(e.Button,{onClick:()=>ai(!0),variant:"outline",size:"lg",children:[(0,b.jsx)(p,{className:"h-4 w-4 mr-2"}),"Ver Historial"]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Total Facturas"}),(0,b.jsx)(o.CreditCard,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:aG})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Facturas Pendientes"}),(0,b.jsx)(q.AlertCircle,{className:"h-4 w-4 text-[#D4AF37]"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-[#D4AF37]",children:aH})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Total Abonado"}),(0,b.jsx)(n.DollarSign,{className:"h-4 w-4 text-green-600"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",(0,u.formatCurrency)(aJ)]})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Saldo Pendiente"}),(0,b.jsx)(n.DollarSign,{className:"h-4 w-4 text-[#D4AF37]"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold text-[#D4AF37]",children:["$",(0,u.formatCurrency)(aI)]})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(f.Input,{className:"pl-9",placeholder:"Buscar por factura, cliente o identificación...",value:X,onChange:a=>Y(a.target.value)})]}),(0,b.jsx)(e.Button,{type:"button",variant:R?"default":"outline",onClick:()=>S(!R),className:"whitespace-nowrap",children:R?"Ocultar Fechas":"Buscar por Fechas"})]}),R&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-md bg-muted/50",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"facturasFechaInicio",children:"Fecha Inicio"}),(0,b.jsx)(f.Input,{id:"facturasFechaInicio",type:"date",value:T,onChange:a=>U(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"facturasFechaFin",children:"Fecha Fin"}),(0,b.jsx)(f.Input,{id:"facturasFechaFin",type:"date",value:V,onChange:a=>W(a.target.value)})]}),(0,b.jsxs)("div",{className:"md:col-span-2 flex gap-2 justify-end",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>{U(""),W(""),at()},children:"Limpiar Filtros"}),(0,b.jsx)(e.Button,{type:"button",onClick:()=>at(T,V),children:"Aplicar Filtro"})]})]})]})}),(0,b.jsx)(d.CardContent,{className:"overflow-x-auto",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Factura"}),(0,b.jsx)(i.TableHead,{children:"Cliente"}),(0,b.jsx)(i.TableHead,{className:"hidden lg:table-cell",children:"Fecha"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Monto Total"}),(0,b.jsx)(i.TableHead,{className:"text-right hidden md:table-cell",children:"Abonado"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Pendiente"}),(0,b.jsx)(i.TableHead,{className:"hidden xl:table-cell",children:"Vencimiento"}),(0,b.jsx)(i.TableHead,{children:"Estado"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,b.jsx)(i.TableBody,{children:Z&&0===x.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"Cargando facturas..."})}):0===aE.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No se encontraron facturas"})}):aE.map(a=>{let c=a.saldo_pendiente,d=c>0?"pendiente":"pagada",f=c<0,g=Math.ceil((new Date(a.fecha_vencimiento).getTime()-new Date().getTime())/864e5),j=g<0&&"pendiente"===d,k=g>=0&&g<=7&&"pendiente"===d;return(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)(h.Badge,{variant:"outline",children:["#",a.numero_venta]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.cliente_nombre}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.cliente_identificacion})]})}),(0,b.jsx)(i.TableCell,{className:"hidden lg:table-cell text-sm",children:new Date(a.fecha_venta).toLocaleDateString("es-EC")}),(0,b.jsxs)(i.TableCell,{className:"text-right font-medium",children:["$",(0,u.formatCurrency)(a.monto_total)]}),(0,b.jsxs)(i.TableCell,{className:"text-right text-green-600 font-medium hidden md:table-cell",children:["$",(0,u.formatCurrency)(a.total_abonado)]}),(0,b.jsx)(i.TableCell,{className:"text-right",children:f?(0,b.jsxs)("span",{className:"text-blue-600 font-medium",title:"Saldo a favor del cliente",children:["-$",(0,u.formatCurrency)(Math.abs(c))]}):(0,b.jsxs)("span",{className:c>0?"font-semibold text-[#D4AF37]":"text-muted-foreground",children:["$",(0,u.formatCurrency)(c)]})}),(0,b.jsx)(i.TableCell,{className:"hidden xl:table-cell text-sm",children:j?(0,b.jsxs)("span",{className:"text-destructive font-medium",children:["Vencida (",Math.abs(g)," días)"]}):k?(0,b.jsxs)("span",{className:"text-[#D4AF37] font-medium",children:[g," días"]}):"pagada"===d?(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"}):(0,b.jsxs)("span",{className:"text-muted-foreground",children:[g," días"]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"pagada"===d?"default":j?"destructive":"secondary",children:"pagada"===d?"Pagada":j?"Vencida":"Pendiente"})}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-1",children:["pendiente"===d&&(0,b.jsxs)(e.Button,{variant:"default",size:"sm",onClick:()=>az(a),disabled:Z,children:[(0,b.jsx)(n.DollarSign,{className:"h-4 w-4 mr-1"}),"Abonar"]}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>aA(a),title:"Ver historial de abonos",children:(0,b.jsx)(p,{className:"h-4 w-4"})})]})})]},a.id)})})]})})]}),(0,b.jsx)(j.Dialog,{open:_,onOpenChange:aa,children:(0,b.jsxs)(j.DialogContent,{className:"max-w-lg",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Abonar a Factura"}),(0,b.jsxs)(j.DialogDescription,{children:["Factura: #",z?.numero_venta,(0,b.jsx)("br",{}),"Cliente: ",z?.cliente_nombre]})]}),(0,b.jsxs)("form",{onSubmit:ax,children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Total"}),(0,b.jsxs)("p",{className:"font-semibold",children:["$",(0,u.formatCurrency)(z?.monto_total||0)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Abonado"}),(0,b.jsxs)("p",{className:"font-semibold text-green-600",children:["$",(0,u.formatCurrency)(z?.total_abonado||0)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Pendiente"}),(0,b.jsxs)("p",{className:"font-semibold text-[#D4AF37]",children:["$",(0,u.formatCurrency)(z?.saldo_pendiente||0)]})]})]})})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"montoIndividual",children:"Monto del Abono *"}),(0,b.jsx)(f.Input,{id:"montoIndividual",type:"text",value:ap.monto?(0,u.formatCurrency)(ap.monto):"",onChange:a=>{let b=a.target.value.replace(/\./g,"").replace(/[^0-9]/g,""),c=Number.parseFloat(b)||0,d=z?.saldo_pendiente||0;c<=d?aq({...ap,monto:b}):(aq({...ap,monto:d.toString()}),t.toast.error("Monto excedido",{description:`El monto no puede ser mayor al saldo pendiente de $${(0,u.formatCurrency)(d)}`}))},onFocus:a=>{ap.monto&&(a.target.value=ap.monto)},onBlur:a=>{ap.monto&&(a.target.value=(0,u.formatCurrency)(ap.monto))},placeholder:`M\xe1ximo: $${(0,u.formatCurrency)(z?.saldo_pendiente||0)}`,required:!0}),ap.monto&&Number.parseFloat(ap.monto)>0&&z&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Nuevo saldo: $",(0,u.formatCurrency)(Math.max(0,z.saldo_pendiente-Number.parseFloat(ap.monto)))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"metodoPagoIndividual",children:"Método de Pago *"}),(0,b.jsxs)(k.Select,{value:ap.metodoPago,onValueChange:a=>aq({...ap,metodoPago:a}),children:[(0,b.jsx)(k.SelectTrigger,{id:"metodoPagoIndividual",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"efectivo",children:"Efectivo"}),(0,b.jsx)(k.SelectItem,{value:"transferencia",children:"Transferencia"})]})]})]}),"transferencia"===ap.metodoPago&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"referenciaIndividual",children:"Referencia de Transferencia"}),(0,b.jsx)(f.Input,{id:"referenciaIndividual",value:ap.referencia,onChange:a=>aq({...ap,referencia:a.target.value}),placeholder:"Número de referencia"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"notasIndividual",children:"Notas (opcional)"}),(0,b.jsx)(l.Textarea,{id:"notasIndividual",value:ap.notas,onChange:a=>aq({...ap,notas:a.target.value}),placeholder:"Observaciones adicionales",rows:3})]})]}),(0,b.jsxs)(j.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:aC,children:"Cancelar"}),(0,b.jsx)(e.Button,{type:"submit",disabled:Z,children:Z?"Registrando...":"Registrar Abono"})]})]})]})}),(0,b.jsx)(j.Dialog,{open:ah,onOpenChange:ai,children:(0,b.jsxs)(j.DialogContent,{className:"max-w-full mx-4",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Buscar Historial de Abonos"}),(0,b.jsx)(j.DialogDescription,{children:"Busca un cliente para ver su historial completo de abonos"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"buscarHistorial",children:"Buscar Cliente"}),(0,b.jsx)(f.Input,{id:"buscarHistorial",placeholder:"Buscar por nombre o identificación...",value:H,onChange:a=>I(a.target.value),autoFocus:!0})]}),H&&(0,b.jsx)(v.ScrollArea,{className:"h-[400px] border rounded-md",children:B.filter(a=>(0,u.normalizeText)(a.nombre).includes((0,u.normalizeText)(H))||(0,u.normalizeText)(a.identificacion).includes((0,u.normalizeText)(H))).map(a=>(0,b.jsx)("div",{className:"p-4 border-b hover:bg-accent cursor-pointer transition-colors",onClick:async()=>{ai(!1),I(""),await aB(a)},children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-base",children:a.nombre}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[(0,b.jsx)("span",{className:"font-medium",children:"ID:"})," ",a.identificacion,a.telefono&&(0,b.jsxs)(b.Fragment,{children:[" "," | ",(0,b.jsx)("span",{className:"font-medium",children:"Tel:"})," ",a.telefono]})]})]}),(0,b.jsxs)("div",{className:"text-right ml-4",children:[(0,b.jsxs)("p",{className:"text-sm font-semibold text-[#D4AF37]",children:["$",(0,u.formatCurrency)(a.saldo_pendiente)]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.cuentas_pendientes," ",1===a.cuentas_pendientes?"factura":"facturas"]})]})]})},a.id))})]})]})}),(0,b.jsx)(j.Dialog,{open:ab,onOpenChange:ac,children:(0,b.jsxs)(j.DialogContent,{className:"max-w-3xl max-h-[150vh]",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Abonar a Cliente con Distribución Automática"}),(0,b.jsx)(j.DialogDescription,{children:"Busca un cliente y el pago se distribuirá automáticamente entre sus facturas pendientes (más antiguas primero)"})]}),(0,b.jsx)(v.ScrollArea,{className:"max-h-[70vh]",children:(0,b.jsxs)("form",{onSubmit:ay,children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"cliente",children:"Buscar Cliente *"}),(0,b.jsx)(f.Input,{id:"cliente",placeholder:"Buscar por nombre o identificación...",value:F,onChange:a=>G(a.target.value)}),F&&(0,b.jsx)("div",{className:"border rounded-md max-h-48 overflow-y-auto mt-2",children:0===aF.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No se encontraron clientes"}):aF.map(a=>(0,b.jsx)("div",{className:`p-3 border-b cursor-pointer hover:bg-accent ${D?.id===a.id?"bg-accent":""}`,onClick:()=>{E(a),G(a.nombre)},children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-base",children:a.nombre}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[(0,b.jsx)("span",{className:"font-medium",children:"ID:"})," ",a.identificacion,a.telefono&&(0,b.jsxs)(b.Fragment,{children:[" | ",(0,b.jsx)("span",{className:"font-medium",children:"Tel:"})," ",a.telefono]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),aB(a)},title:"Ver historial de abonos",children:(0,b.jsx)(p,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-sm font-semibold text-[#D4AF37]",children:["$",(0,u.formatCurrency)(a.saldo_pendiente)]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.cuentas_pendientes," ",1===a.cuentas_pendientes?"factura":"facturas"]})]})]})]})},a.id))})]}),D&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Card,{className:"bg-muted",children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Facturas Pendientes"}),(0,b.jsx)("p",{className:"font-semibold",children:D.cuentas_pendientes})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Total Deuda"}),(0,b.jsxs)("p",{className:"font-semibold text-[#D4AF37]",children:["$",(0,u.formatCurrency)(D.saldo_pendiente)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Cliente"}),(0,b.jsx)("p",{className:"font-semibold text-xs",children:D.nombre})]})]})})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"montoCliente",children:"Monto del Abono *"}),(0,b.jsx)(f.Input,{id:"montoCliente",type:"text",value:ar.monto?(0,u.formatCurrency)(ar.monto):"",onChange:a=>{let b=a.target.value.replace(/\./g,"").replace(/[^0-9]/g,""),c=Number.parseFloat(b)||0,d=D?.saldo_pendiente||0;c<=d?as({...ar,monto:b}):(as({...ar,monto:d.toString()}),t.toast.error("Monto excedido",{description:`El monto no puede ser mayor al saldo total del cliente de $${(0,u.formatCurrency)(d)}`}))},onFocus:a=>{ar.monto&&(a.target.value=ar.monto)},onBlur:a=>{ar.monto&&(a.target.value=(0,u.formatCurrency)(ar.monto))},placeholder:`M\xe1ximo: $${(0,u.formatCurrency)(D?.saldo_pendiente||0)}`,required:!0}),ar.monto&&Number.parseFloat(ar.monto)>0&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Nuevo saldo del cliente: $",(0,u.formatCurrency)(Math.max(0,D.saldo_pendiente-Number.parseFloat(ar.monto)))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"metodoPagoCliente",children:"Método de Pago *"}),(0,b.jsxs)(k.Select,{value:ar.metodoPago,onValueChange:a=>as({...ar,metodoPago:a}),children:[(0,b.jsx)(k.SelectTrigger,{id:"metodoPagoCliente",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"efectivo",children:"Efectivo"}),(0,b.jsx)(k.SelectItem,{value:"transferencia",children:"Transferencia"})]})]})]}),"transferencia"===ar.metodoPago&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"referenciaCliente",children:"Referencia de Transferencia"}),(0,b.jsx)(f.Input,{id:"referenciaCliente",value:ar.referencia,onChange:a=>as({...ar,referencia:a.target.value}),placeholder:"Número de referencia"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"notasCliente",children:"Notas (opcional)"}),(0,b.jsx)(l.Textarea,{id:"notasCliente",value:ar.notas,onChange:a=>as({...ar,notas:a.target.value}),placeholder:"Observaciones adicionales",rows:3})]})]})]}),(0,b.jsxs)(j.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:aD,children:"Cancelar"}),(0,b.jsx)(e.Button,{type:"submit",disabled:Z||!D,children:Z?"Registrando...":"Distribuir Abono"})]})]})})]})}),(0,b.jsx)(j.Dialog,{open:ad,onOpenChange:a=>{ae(a),a||K("")},children:(0,b.jsxs)(j.DialogContent,{className:"w-[99vw] h-[95vh] flex flex-col p-0",style:{maxWidth:"60vw"},children:[(0,b.jsxs)(j.DialogHeader,{className:"px-6 pt-6 pb-4 border-b",children:[(0,b.jsx)(j.DialogTitle,{className:"text-xl md:text-2xl",children:"Historial de Abonos de Factura"}),(0,b.jsxs)(j.DialogDescription,{className:"text-sm md:text-base",children:[(0,b.jsxs)("span",{className:"font-semibold text-foreground",children:["Factura #",z?.numero_venta]}),(0,b.jsx)("br",{}),(0,b.jsxs)("span",{className:"text-xs md:text-sm",children:["Cliente: ",(0,b.jsx)("span",{className:"font-medium",children:z?.cliente_nombre})]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:(0,b.jsxs)("div",{className:"px-6 py-4",children:[(0,b.jsx)(d.Card,{className:"mb-6 bg-gradient-to-r from-muted to-muted/50 border-2",children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"text-center sm:text-left",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Monto Total"}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-primary",children:["$",(0,u.formatCurrency)(z?.monto_total||0)]})]}),(0,b.jsxs)("div",{className:"text-center sm:text-left",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Total Abonado"}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:["$",(0,u.formatCurrency)(z?.total_abonado||0)]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[z?.cantidad_abonos||0," ",z?.cantidad_abonos===1?"abono":"abonos"]})]}),(0,b.jsxs)("div",{className:"text-center sm:text-left",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Saldo Pendiente"}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-[#D4AF37]",children:["$",(0,u.formatCurrency)(z?.saldo_pendiente||0)]})]})]})})}),aj.length>0&&(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)(f.Input,{placeholder:"Buscar por fecha, monto, método, referencia, notas o usuario...",value:J,onChange:a=>K(a.target.value),className:"max-w-2xl"})}),0===(a=aj.filter(a=>{if(!J)return!0;let b=(0,u.normalizeText)(J);return(0,u.normalizeText)(new Date(a.fecha).toLocaleString("es-EC")).includes(b)||(0,u.normalizeText)(a.monto.toString()).includes(b)||(0,u.normalizeText)(a.metodoPago).includes(b)||(0,u.normalizeText)(a.referencia||"").includes(b)||(0,u.normalizeText)(a.notas||"").includes(b)||(0,u.normalizeText)(a.usuario).includes(b)})).length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(p,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{className:"text-lg font-medium",children:0===aj.length?"No hay abonos registrados":"No se encontraron abonos"}),(0,b.jsx)("p",{className:"text-sm",children:0===aj.length?"Esta factura no tiene historial de pagos":"Intenta con otro término de búsqueda"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"hidden md:block border rounded-lg",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:(0,b.jsxs)(i.Table,{className:"w-full",children:[(0,b.jsx)(i.TableHeader,{className:"sticky top-0 bg-background z-10",children:(0,b.jsxs)(i.TableRow,{className:"bg-muted/50",children:[(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[160px]",children:"Fecha"}),(0,b.jsx)(i.TableHead,{className:"font-semibold text-right whitespace-nowrap min-w-[120px]",children:"Monto"}),(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Método"}),(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Referencia"}),(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Notas"}),(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[90px]",children:"Usuario"})]})}),(0,b.jsx)(i.TableBody,{children:a.map(a=>(0,b.jsxs)(i.TableRow,{className:"hover:bg-muted/30",children:[(0,b.jsx)(i.TableCell,{className:"text-sm whitespace-nowrap font-medium",children:new Date(a.fecha).toLocaleString("es-EC",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,b.jsxs)(i.TableCell,{className:"text-base font-bold text-green-600 text-right whitespace-nowrap",children:["$",(0,u.formatCurrency)(a.monto)]}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"secondary",className:"capitalize",children:a.metodoPago})}),(0,b.jsx)(i.TableCell,{className:"text-sm",children:a.referencia?(0,b.jsx)("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded break-words",children:a.referencia}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(i.TableCell,{className:"text-sm",children:a.notas?(0,b.jsx)("div",{className:"break-words",title:a.notas,children:a.notas}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(i.TableCell,{className:"text-sm font-medium",children:a.usuario})]},a.id))})]})})})}),(0,b.jsx)("div",{className:"md:hidden space-y-4",children:a.map(a=>(0,b.jsx)(d.Card,{className:"overflow-hidden border-2 hover:border-primary/50 transition-colors",children:(0,b.jsxs)(d.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"bg-muted/50 p-3 border-b",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-medium mb-1",children:new Date(a.fecha).toLocaleString("es-EC",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["$",(0,u.formatCurrency)(a.monto)]})})]})}),(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Método de Pago"}),(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs capitalize",children:a.metodoPago})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Usuario"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.usuario})]})]}),a.referencia&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Referencia"}),(0,b.jsx)("p",{className:"text-sm font-mono bg-muted px-2 py-1 rounded break-all",children:a.referencia})]}),a.notas&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Notas"}),(0,b.jsx)("p",{className:"text-sm bg-muted/50 px-3 py-2 rounded",children:a.notas})]})]})]})},a.id))})]})]})})]})}),(0,b.jsx)(j.Dialog,{open:af,onOpenChange:a=>{ag(a),a||(K(""),M(!1),O(""),Q(""))},children:(0,b.jsxs)(j.DialogContent,{className:"w-[99vw] h-[95vh] flex flex-col p-0",style:{maxWidth:"60vw"},children:[(0,b.jsxs)(j.DialogHeader,{className:"px-6 pt-6 pb-4 border-b",children:[(0,b.jsx)(j.DialogTitle,{className:"text-xl md:text-2xl",children:"Historial General de Abonos"}),(0,b.jsxs)(j.DialogDescription,{className:"text-sm md:text-base",children:[(0,b.jsxs)("span",{className:"font-semibold text-foreground",children:["Cliente: ",D?.nombre]}),(0,b.jsx)("br",{}),(0,b.jsxs)("span",{className:"text-xs md:text-sm",children:["ID: ",D?.identificacion,an&&(0,b.jsxs)(b.Fragment,{children:[" "," | Total Abonado: ",(0,b.jsxs)("span",{className:"font-semibold text-green-600",children:["$",(0,u.formatCurrency)(an.total_abonado)]})," "," | Saldo Pendiente: ",(0,b.jsxs)("span",{className:"font-semibold text-[#D4AF37]",children:["$",(0,u.formatCurrency)(an.saldo_pendiente)]})]})]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:(0,b.jsxs)("div",{className:"px-6 py-4",children:[aj.length>0&&(0,b.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Input,{placeholder:"Buscar por fecha, factura, monto, método, referencia, notas o usuario...",value:J,onChange:a=>K(a.target.value),className:"flex-1"}),(0,b.jsx)(e.Button,{type:"button",variant:L?"default":"outline",onClick:()=>M(!L),className:"whitespace-nowrap",children:L?"Ocultar Fechas":"Buscar por Fechas"})]}),L&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-md bg-muted/50",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"fechaInicioHistorial",children:"Fecha Inicio"}),(0,b.jsx)(f.Input,{id:"fechaInicioHistorial",type:"date",value:N,onChange:a=>O(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"fechaFinHistorial",children:"Fecha Fin"}),(0,b.jsx)(f.Input,{id:"fechaFinHistorial",type:"date",value:P,onChange:a=>Q(a.target.value)})]}),(0,b.jsxs)("div",{className:"md:col-span-2 flex gap-2 justify-end",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>{O(""),Q(""),D&&aw(D.id)},children:"Limpiar Filtros"}),(0,b.jsx)(e.Button,{type:"button",onClick:()=>{D&&aw(D.id,N,P)},children:"Aplicar Filtro"})]})]})]}),0===(w=aj.filter(a=>{if(!J)return!0;let b=(0,u.normalizeText)(J);return(0,u.normalizeText)(new Date(a.fecha).toLocaleString("es-EC")).includes(b)||(0,u.normalizeText)(a.numero_venta?.toString()||"").includes(b)||(0,u.normalizeText)(a.monto.toString()).includes(b)||(0,u.normalizeText)(a.metodoPago).includes(b)||(0,u.normalizeText)(a.referencia||"").includes(b)||(0,u.normalizeText)(a.notas||"").includes(b)||(0,u.normalizeText)(a.usuario).includes(b)})).length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(p,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{className:"text-lg font-medium",children:0===aj.length?"No hay abonos registrados":"No se encontraron abonos"}),(0,b.jsx)("p",{className:"text-sm",children:0===aj.length?"Este cliente no tiene historial de pagos":"Intenta con otro término de búsqueda"})]}):(0,b.jsxs)(b.Fragment,{children:[an&&(0,b.jsx)(d.Card,{className:"mb-6 bg-gradient-to-r from-muted to-muted/50 border-2",children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"text-center sm:text-left",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Total Abonado"}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:["$",(0,u.formatCurrency)(an.total_abonado)]})]}),(0,b.jsxs)("div",{className:"text-center sm:text-left",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Cantidad de Abonos"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-primary",children:an.cantidad_abonos}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"pagos registrados"})]}),(0,b.jsxs)("div",{className:"text-center sm:text-left",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Saldo Pendiente"}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-[#D4AF37]",children:["$",(0,u.formatCurrency)(an.saldo_pendiente)]})]})]})})}),(0,b.jsx)("div",{className:"hidden md:block border rounded-lg",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:(0,b.jsxs)(i.Table,{className:"w-full",children:[(0,b.jsx)(i.TableHeader,{className:"sticky top-0 bg-background z-10",children:(0,b.jsxs)(i.TableRow,{className:"bg-muted/50",children:[(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[160px]",children:"Fecha"}),(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[100px]",children:"Factura"}),(0,b.jsx)(i.TableHead,{className:"font-semibold text-right whitespace-nowrap min-w-[120px]",children:"Monto"}),(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Método"}),(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Referencia"}),(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[120px]",children:"Notas"}),(0,b.jsx)(i.TableHead,{className:"font-semibold whitespace-nowrap min-w-[90px]",children:"Usuario"})]})}),(0,b.jsx)(i.TableBody,{children:w.map(a=>(0,b.jsxs)(i.TableRow,{className:"hover:bg-muted/30",children:[(0,b.jsx)(i.TableCell,{className:"text-sm whitespace-nowrap font-medium",children:new Date(a.fecha).toLocaleString("es-EC",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)(i.TableCell,{children:a.numero_venta?(0,b.jsxs)(h.Badge,{variant:"outline",className:"font-mono",children:["#",a.numero_venta]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsxs)(i.TableCell,{className:"text-base font-bold text-green-600 text-right whitespace-nowrap",children:["$",(0,u.formatCurrency)(a.monto)]}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"secondary",className:"capitalize",children:a.metodoPago})}),(0,b.jsx)(i.TableCell,{className:"text-sm",children:a.referencia?(0,b.jsx)("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded break-words",children:a.referencia}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(i.TableCell,{className:"text-sm",children:a.notas?(0,b.jsx)("div",{className:"break-words",title:a.notas,children:a.notas}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,b.jsx)(i.TableCell,{className:"text-sm font-medium",children:a.usuario})]},a.id))})]})})})}),(0,b.jsx)("div",{className:"md:hidden space-y-4",children:w.map(a=>(0,b.jsx)(d.Card,{className:"overflow-hidden border-2 hover:border-primary/50 transition-colors",children:(0,b.jsxs)(d.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"bg-muted/50 p-3 border-b",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-medium mb-1",children:new Date(a.fecha).toLocaleString("es-EC",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),a.numero_venta&&(0,b.jsxs)(h.Badge,{variant:"outline",className:"text-xs font-mono",children:["#",a.numero_venta]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["$",(0,u.formatCurrency)(a.monto)]})})]})}),(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Método de Pago"}),(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs capitalize",children:a.metodoPago})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Usuario"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.usuario})]})]}),a.referencia&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Referencia"}),(0,b.jsx)("p",{className:"text-sm font-mono bg-muted px-2 py-1 rounded break-all",children:a.referencia})]}),a.notas&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Notas"}),(0,b.jsx)("p",{className:"text-sm bg-muted/50 px-3 py-2 rounded",children:a.notas})]})]})]})},a.id))})]})]})})]})})]})}a.s(["ClientesContent",()=>w],71841)}];

//# sourceMappingURL=components_clientes-content_tsx_a5423e03._.js.map