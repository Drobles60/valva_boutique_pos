module.exports=[13251,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(7085);let e=(0,a.i(61237).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var f=a.i(84980),g=a.i(31798),h=a.i(96826),i=a.i(61802),j=a.i(23305),k=a.i(40695),l=a.i(5522),m=a.i(17171),n=a.i(3130),o=a.i(54161),p=a.i(88237),q=a.i(87682),r=a.i(65733),s=a.i(46893),t=a.i(39793),u=a.i(59848),v=a.i(9606),w=a.i(97895);function x(){let[a,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)([]),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)({nombre:"",descripcion:"",tipo:"porcentaje",valor:"",fecha_inicio:"",fecha_fin:"",estado:"activo",aplicable_a:"productos",productos_seleccionados:[],tipos_prenda_seleccionados:[]});(0,c.useEffect)(()=>{W(),Y()},[]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{X(Q)},300);return()=>clearTimeout(a)},[Q]);let W=async()=>{try{let a=await fetch("/api/descuentos");if(a.ok){let b=await a.json();x(b.data||[])}}catch(a){console.error("Error cargando descuentos:",a),v.toast.error("Error al cargar descuentos")}},X=async(a="")=>{if(!a.trim())return void L([]);try{let b=await fetch("/api/productos");if(b.ok){let c=(await b.json()).data||[],d=(0,w.normalizeText)(a),e=c.filter(a=>(0,w.normalizeText)(a.nombre||"").includes(d)||(0,w.normalizeText)(a.sku||"").includes(d)||(0,w.normalizeText)(a.codigo_barras||"").includes(d));L(e)}}catch(a){console.error("Error cargando productos:",a)}},Y=async()=>{try{let a=await fetch("/api/tipos-prenda");if(a.ok){let b=await a.json();N(b.data||[])}}catch(a){console.error("Error cargando tipos de prenda:",a)}},Z=async()=>{if(!U.nombre||!U.valor)return void v.toast.error("Completa los campos requeridos");if("porcentaje"===U.tipo&&parseFloat(U.valor)>100)return void v.toast.error("El porcentaje no puede ser mayor a 100%");if("porcentaje"===U.tipo&&0>=parseFloat(U.valor))return void v.toast.error("El porcentaje debe ser mayor a 0%");if("productos"===U.aplicable_a&&0===U.productos_seleccionados.length)return void v.toast.error("Selecciona al menos un producto");if("tipos_prenda"===U.aplicable_a&&0===U.tipos_prenda_seleccionados.length)return void v.toast.error("Selecciona al menos un tipo de prenda");try{let a,b={id:A?.id,nombre:U.nombre,descripcion:U.descripcion,tipo:U.tipo,valor:parseFloat(U.valor),fecha_inicio:U.fecha_inicio,fecha_fin:U.fecha_fin,estado:U.estado,aplicable_a:U.aplicable_a,productos_seleccionados:"productos"===U.aplicable_a?U.productos_seleccionados:[],tipos_prenda_seleccionados:"tipos_prenda"===U.aplicable_a?U.tipos_prenda_seleccionados:[]},c=A?"PUT":"POST",d=await fetch("/api/descuentos",{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});try{a=await d.json()}catch(a){console.error("Error parseando JSON:",a),v.toast.error("Error de servidor - respuesta inválida");return}d.ok&&a.success?(v.toast.success(A?"Descuento actualizado":"Descuento creado"),W(),_()):(console.error("Error del servidor:",a),v.toast.error(a.error||"Error al guardar descuento"),a.details&&(console.error("Detalles:",a.details),console.error("Código:",a.code)))}catch(a){console.error("Error completo:",a),v.toast.error("Error al guardar descuento")}},$=async()=>{if(E){try{let a=await fetch(`/api/descuentos?id=${E}`,{method:"DELETE"}),b=await a.json();a.ok?(v.toast.success("Descuento eliminado correctamente"),W()):(console.error("Error del servidor:",b),v.toast.error(b.error||"Error al eliminar descuento"),b.details&&console.error("Detalles:",b.details))}catch(a){console.error("Error completo:",a),v.toast.error("Error al eliminar descuento")}F(null)}},_=()=>{z(!1),B(null),R(""),T(""),V({nombre:"",descripcion:"",tipo:"porcentaje",valor:"",fecha_inicio:"",fecha_fin:"",estado:"activo",aplicable_a:"productos",productos_seleccionados:[],tipos_prenda_seleccionados:[]})},aa=a.filter(a=>(0,w.normalizeText)(a.nombre).includes((0,w.normalizeText)(O))||(0,w.normalizeText)(a.descripcion).includes((0,w.normalizeText)(O)));return(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(t.SidebarToggle,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Gestión de Descuentos"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground md:text-base",children:"Crea descuentos fijos o porcentuales para productos o tipos de prenda"})]})]}),(0,b.jsxs)(k.Button,{onClick:()=>z(!0),children:[(0,b.jsx)(f.Plus,{className:"mr-2 h-4 w-4"}),"Nuevo Descuento"]})]}),(0,b.jsx)(n.Card,{children:(0,b.jsx)(n.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(l.Input,{placeholder:"Buscar descuentos por nombre...",className:"pl-9",value:O,onChange:a=>P(a.target.value)})]})})}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{children:"Descuentos Activos"}),(0,b.jsxs)(n.CardDescription,{children:[aa.length," descuento(s) registrado(s)"]})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)(p.Table,{children:[(0,b.jsx)(p.TableHeader,{children:(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableHead,{children:"Nombre"}),(0,b.jsx)(p.TableHead,{children:"Tipo"}),(0,b.jsx)(p.TableHead,{children:"Valor"}),(0,b.jsx)(p.TableHead,{children:"Aplica a"}),(0,b.jsx)(p.TableHead,{children:"Vigencia"}),(0,b.jsx)(p.TableHead,{children:"Estado"}),(0,b.jsx)(p.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,b.jsx)(p.TableBody,{children:0===aa.length?(0,b.jsx)(p.TableRow,{children:(0,b.jsx)(p.TableCell,{colSpan:7,className:"text-center text-muted-foreground",children:"No hay descuentos registrados"})}):aa.map(a=>(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableCell,{className:"font-medium",children:a.nombre}),(0,b.jsx)(p.TableCell,{children:(0,b.jsx)(o.Badge,{variant:"porcentaje"===a.tipo?"default":"secondary",children:"porcentaje"===a.tipo?"Porcentaje":"Fijo"})}),(0,b.jsx)(p.TableCell,{children:"porcentaje"===a.tipo?`${Number(a.valor).toFixed(0)}% de descuento`:`Precio fijo: $${(0,w.formatCurrency)(Number(a.valor))}`}),(0,b.jsx)(p.TableCell,{children:"productos"===a.aplicable_a?(0,b.jsxs)("span",{className:"text-sm",children:[a.productos?.length||0," producto(s)"]}):(0,b.jsxs)("span",{className:"text-sm",children:[a.tipos_prenda?.length||0," tipo(s) de prenda"]})}),(0,b.jsx)(p.TableCell,{className:"text-sm",children:a.fecha_inicio&&a.fecha_fin?(0,b.jsxs)(b.Fragment,{children:[new Date(a.fecha_inicio).toLocaleDateString()," -"," ",new Date(a.fecha_fin).toLocaleDateString()]}):"Sin límite"}),(0,b.jsx)(p.TableCell,{children:(0,b.jsx)(o.Badge,{variant:"activo"===a.estado?"default":"secondary",children:a.estado})}),(0,b.jsx)(p.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(k.Button,{variant:"ghost",size:"sm",onClick:()=>{J(a),H(!0)},title:"Ver Detalles",children:(0,b.jsx)(j.Eye,{className:"h-4 w-4"})}),(0,b.jsx)(k.Button,{variant:"ghost",size:"sm",onClick:()=>{let b,c;return B(a),b=Array.isArray(a.productos)?a.productos.map(a=>"string"==typeof a?a:a.producto_id?.toString()):[],c=Array.isArray(a.tipos_prenda)?a.tipos_prenda.map(a=>"string"==typeof a?a:a.tipo_prenda_id?.toString()):[],void(V({nombre:a.nombre||"",descripcion:a.descripcion||"",tipo:a.tipo,valor:a.valor.toString(),fecha_inicio:a.fecha_inicio||"",fecha_fin:a.fecha_fin||"",estado:a.estado,aplicable_a:a.aplicable_a,productos_seleccionados:b,tipos_prenda_seleccionados:c}),z(!0))},children:(0,b.jsx)(g.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(k.Button,{variant:"ghost",size:"sm",onClick:()=>{F(a.id),D(!0)},children:(0,b.jsx)(h.Trash2,{className:"h-4 w-4"})})]})})]},a.id))})]})})]}),(0,b.jsx)(r.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(r.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{children:A?"Editar Descuento":"Nuevo Descuento"}),(0,b.jsx)(r.DialogDescription,{children:"Define los parámetros del descuento y selecciona a qué se aplicará"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"nombre",children:"Nombre del Descuento *"}),(0,b.jsx)(l.Input,{id:"nombre",placeholder:"Ej: Descuento Temporada",value:U.nombre,onChange:a=>V({...U,nombre:a.target.value.toUpperCase()}),className:"uppercase"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"descripcion",children:"Descripción"}),(0,b.jsx)(s.Textarea,{id:"descripcion",placeholder:"Describe el descuento...",value:U.descripcion||"",onChange:a=>V({...U,descripcion:a.target.value.toUpperCase()}),className:"uppercase"})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"tipo",children:"Tipo de Descuento *"}),(0,b.jsxs)(q.Select,{value:U.tipo,onValueChange:a=>V({...U,tipo:a}),children:[(0,b.jsx)(q.SelectTrigger,{children:(0,b.jsx)(q.SelectValue,{})}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"porcentaje",children:"Porcentaje (%)"}),(0,b.jsx)(q.SelectItem,{value:"fijo",children:"Precio Fijo ($)"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"valor",children:"porcentaje"===U.tipo?"Porcentaje de Descuento * (máx. 100)":"Precio Final del Producto *"}),(0,b.jsx)(l.Input,{id:"valor",type:"porcentaje"===U.tipo?"number":"text",placeholder:"porcentaje"===U.tipo?"20":"80.000",value:"porcentaje"===U.tipo?U.valor:U.valor?(0,w.formatCurrency)(U.valor):"",onChange:a=>{if("porcentaje"===U.tipo){let b=a.target.value;parseFloat(b)>100?V({...U,valor:"100"}):V({...U,valor:b})}else{let b=a.target.value.replace(/\./g,"").replace(/[^0-9]/g,"");V({...U,valor:b})}},onFocus:a=>{"fijo"===U.tipo&&U.valor&&(a.target.value=U.valor)},onBlur:a=>{"fijo"===U.tipo&&U.valor&&(a.target.value=(0,w.formatCurrency)(U.valor))},min:"0",max:"porcentaje"===U.tipo?"100":void 0,step:"porcentaje"===U.tipo?"0.1":"1"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"fecha_inicio",children:"Fecha Inicio"}),(0,b.jsx)(l.Input,{id:"fecha_inicio",type:"date",value:U.fecha_inicio,onChange:a=>V({...U,fecha_inicio:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"fecha_fin",children:"Fecha Fin"}),(0,b.jsx)(l.Input,{id:"fecha_fin",type:"date",value:U.fecha_fin,onChange:a=>V({...U,fecha_fin:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"aplicable_a",children:"Aplicar a *"}),(0,b.jsxs)(q.Select,{value:U.aplicable_a,onValueChange:a=>V({...U,aplicable_a:a}),children:[(0,b.jsx)(q.SelectTrigger,{children:(0,b.jsx)(q.SelectValue,{})}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"productos",children:"Productos Específicos"}),(0,b.jsx)(q.SelectItem,{value:"tipos_prenda",children:"Tipos de Prenda"})]})]})]}),"productos"===U.aplicable_a&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{children:"Seleccionar Productos"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(l.Input,{placeholder:"Buscar por nombre, referencia o código...",className:"pl-9",value:Q,onChange:a=>R(a.target.value)})]}),(0,b.jsx)("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto space-y-2",children:0===K.length&&0===Q.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Escribe para buscar productos..."}):0===K.length&&Q.length>0?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No se encontraron productos"}):K.map(a=>{let c=Number(a.precio_venta)||0,d=c,e=0;return U.valor&&U.productos_seleccionados.includes(a.id.toString())&&("porcentaje"===U.tipo?(e=c*Number(U.valor)/100,d=c-e):"fijo"===U.tipo&&(e=c-(d=Number(U.valor)))),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:`producto-${a.id}`,checked:U.productos_seleccionados.includes(a.id.toString()),onChange:()=>{var b;return b=a.id.toString(),void V(a=>({...a,productos_seleccionados:a.productos_seleccionados.includes(b)?a.productos_seleccionados.filter(a=>a!==b):[...a.productos_seleccionados,b]}))},className:"h-4 w-4"}),(0,b.jsx)("label",{htmlFor:`producto-${a.id}`,className:"text-sm flex-1 cursor-pointer",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("span",{children:[a.nombre," - ",a.sku||a.codigo_barras||"Sin SKU"]}),U.valor&&U.productos_seleccionados.includes(a.id.toString())&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground mt-1",children:[(0,b.jsxs)("span",{className:"line-through",children:["$",(0,w.formatCurrency)(c)]}),(0,b.jsxs)("span",{className:"text-green-600 font-semibold ml-2",children:["$",(0,w.formatCurrency)(d)]}),(0,b.jsxs)("span",{className:"text-red-600 ml-2",children:["(-$",(0,w.formatCurrency)(e),")"]})]})]})})]},a.id)})}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[U.productos_seleccionados.length," producto(s) seleccionado(s)"]})]}),"tipos_prenda"===U.aplicable_a&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{children:"Seleccionar Tipos de Prenda"}),(0,b.jsxs)("div",{className:"relative mb-2",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(l.Input,{placeholder:"Buscar tipo de prenda...",value:S,onChange:a=>T(a.target.value),className:"pl-9"})]}),(0,b.jsx)("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto space-y-2",children:M.filter(a=>(0,w.normalizeText)(a.nombre||"").includes((0,w.normalizeText)(S))).map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:`tipo-${a.id}`,checked:U.tipos_prenda_seleccionados.includes(a.id.toString()),onChange:()=>{var b;return b=a.id.toString(),void V(a=>({...a,tipos_prenda_seleccionados:a.tipos_prenda_seleccionados.includes(b)?a.tipos_prenda_seleccionados.filter(a=>a!==b):[...a.tipos_prenda_seleccionados,b]}))},className:"h-4 w-4"}),(0,b.jsx)("label",{htmlFor:`tipo-${a.id}`,className:"text-sm flex-1 cursor-pointer",children:a.nombre})]},a.id))}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[U.tipos_prenda_seleccionados.length," tipo(s) seleccionado(s)"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"estado",children:"Estado"}),(0,b.jsxs)(q.Select,{value:U.estado,onValueChange:a=>V({...U,estado:a}),children:[(0,b.jsx)(q.SelectTrigger,{children:(0,b.jsx)(q.SelectValue,{})}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"activo",children:"Activo"}),(0,b.jsx)(q.SelectItem,{value:"inactivo",children:"Inactivo"})]})]})]})]}),(0,b.jsxs)(r.DialogFooter,{children:[(0,b.jsx)(k.Button,{variant:"outline",onClick:_,children:"Cancelar"}),(0,b.jsxs)(k.Button,{onClick:Z,children:[(0,b.jsx)(e,{className:"mr-2 h-4 w-4"}),A?"Actualizar":"Crear"]})]})]})}),(0,b.jsx)(r.Dialog,{open:G,onOpenChange:H,children:(0,b.jsxs)(r.DialogContent,{className:"max-w-5xl max-h-[90vh] overflow-y-auto w-[98vw] sm:w-[95vw] lg:w-full",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{children:"Detalles del Descuento"}),(0,b.jsx)(r.DialogDescription,{children:"Información completa del descuento y productos/tipos de prenda aplicables"})]}),I&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{className:"text-lg",children:"Información General"})}),(0,b.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Nombre"}),(0,b.jsx)("p",{className:"font-medium",children:I.nombre})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Tipo"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(o.Badge,{variant:"porcentaje"===I.tipo?"default":"secondary",children:"porcentaje"===I.tipo?"Porcentaje":"Precio Fijo"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Valor"}),(0,b.jsx)("p",{className:"font-medium text-lg",children:"porcentaje"===I.tipo?`${I.valor}% de descuento`:`Precio final: $${(0,w.formatCurrency)(I.valor)}`})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Estado"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(o.Badge,{variant:"activo"===I.estado?"default":"secondary",children:I.estado})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Fecha Inicio"}),(0,b.jsx)("p",{className:"font-medium",children:I.fecha_inicio?new Date(I.fecha_inicio).toLocaleDateString():"Sin fecha"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Fecha Fin"}),(0,b.jsx)("p",{className:"font-medium",children:I.fecha_fin?new Date(I.fecha_fin).toLocaleDateString():"Sin fecha"})]})]}),I.descripcion&&(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Label,{className:"text-muted-foreground",children:"Descripción"}),(0,b.jsx)("p",{className:"mt-1",children:I.descripcion})]})]})]}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{children:[(0,b.jsx)(n.CardTitle,{className:"text-lg",children:"productos"===I.aplicable_a?"Productos Aplicables":"Tipos de Prenda Aplicables"}),(0,b.jsx)(n.CardDescription,{children:"productos"===I.aplicable_a?`${I.productos?.length||0} producto(s) con este descuento`:`${I.tipos_prenda?.length||0} tipo(s) de prenda con este descuento`})]}),(0,b.jsx)(n.CardContent,{children:"productos"===I.aplicable_a?(0,b.jsx)("div",{className:"space-y-2",children:I.productos&&I.productos.length>0?(0,b.jsx)("div",{className:"overflow-x-auto -mx-2 px-2",children:(0,b.jsxs)(p.Table,{children:[(0,b.jsx)(p.TableHeader,{children:(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableHead,{className:"min-w-[100px] whitespace-nowrap",children:"Código"}),(0,b.jsx)(p.TableHead,{className:"min-w-[80px] whitespace-nowrap",children:"SKU"}),(0,b.jsx)(p.TableHead,{className:"min-w-[150px] whitespace-nowrap",children:"Nombre"}),(0,b.jsx)(p.TableHead,{className:"text-right min-w-[100px] whitespace-nowrap",children:"Precio"}),(0,b.jsx)(p.TableHead,{className:"text-right min-w-[120px] whitespace-nowrap",children:"Precio c/ Desc."})]})}),(0,b.jsx)(p.TableBody,{children:I.productos.map(a=>{let c=a.precio_venta||0,d="porcentaje"===I.tipo?c-c*I.valor/100:I.valor;return(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableCell,{className:"font-mono text-xs sm:text-sm whitespace-nowrap",children:a.codigo_barras||"N/A"}),(0,b.jsx)(p.TableCell,{className:"font-mono text-xs sm:text-sm whitespace-nowrap",children:a.sku||"N/A"}),(0,b.jsx)(p.TableCell,{className:"font-medium text-sm",children:a.nombre||"Sin nombre"}),(0,b.jsxs)(p.TableCell,{className:"text-right text-sm whitespace-nowrap",children:["$",(0,w.formatCurrency)(c)]}),(0,b.jsxs)(p.TableCell,{className:"text-right font-medium text-green-600 text-sm whitespace-nowrap",children:["$",(0,w.formatCurrency)(Math.max(0,d))]})]},a.producto_id||a.id)})})]})}):(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No hay productos asociados a este descuento"})}):(0,b.jsx)("div",{className:"space-y-2",children:I.tipos_prenda&&I.tipos_prenda.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:I.tipos_prenda.map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-3 flex items-center gap-3",children:[(0,b.jsx)(i.Tag,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.nombre||"Sin nombre"}),a.descripcion&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.descripcion})]})]},a.tipo_prenda_id||a.id))}):(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No hay tipos de prenda asociados a este descuento"})})})]})]}),(0,b.jsx)(r.DialogFooter,{children:(0,b.jsx)(k.Button,{variant:"outline",onClick:()=>H(!1),children:"Cerrar"})})]})}),(0,b.jsx)(u.ConfirmDialog,{open:C,onOpenChange:D,onConfirm:$,title:"¿Eliminar descuento?",description:"Esta acción no se puede deshacer. El descuento será eliminado permanentemente."})]})}a.s(["DescuentosContent",()=>x],13251)}];

//# sourceMappingURL=components_descuentos-content_tsx_b699da37._.js.map