module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},39871,e=>{"use strict";var t=e.i(21347),r=e.i(4483),o=e.i(42707),a=e.i(7157),n=e.i(57085),s=e.i(42638),i=e.i(28123),l=e.i(73873),d=e.i(36011),u=e.i(2538),c=e.i(16591),p=e.i(24432),R=e.i(72920),E=e.i(32160),v=e.i(89104),x=e.i(13303),h=e.i(93695);e.i(54677);var f=e.i(77279),m=e.i(44747),g=e.i(62294);async function y(){try{let e=await (0,g.query)(`SELECT id, codigo, ruc, razon_social, nombre_comercial, telefono, celular, email,
              direccion, ciudad, provincia, persona_contacto, telefono_contacto,
              estado, created_at, updated_at 
       FROM proveedores 
       ORDER BY razon_social ASC`);return m.NextResponse.json({success:!0,data:Array.isArray(e)?e:[]})}catch(e){return console.error("Error al obtener proveedores:",e),m.NextResponse.json({success:!1,error:e.message||"Error al obtener proveedores"},{status:500})}}async function w(e){try{let{codigo:t,ruc:r,razonSocial:o,nombreComercial:a,telefono:n,celular:s,email:i,direccion:l,ciudad:d,provincia:u,personaContacto:c,telefonoContacto:p}=await e.json();if(t=t||null,a=a||null,s=s||null,i=i||null,l=l||null,d=d||null,u=u||null,c=c||null,p=p||null,!r||!o||!n)return m.NextResponse.json({error:"RUC, razón social y teléfono son obligatorios"},{status:400});if((await (0,g.query)("SELECT id FROM proveedores WHERE ruc = ?",[r])).length>0)return m.NextResponse.json({error:"Ya existe un proveedor con este RUC"},{status:400});let R=await (0,g.query)(`INSERT INTO proveedores (
        codigo, ruc, razon_social, nombre_comercial, telefono, celular, email,
        direccion, ciudad, provincia, persona_contacto, telefono_contacto, estado
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'activo')`,[t,r,o,a,n,s,i,l,d,u,c,p]),E=await (0,g.query)(`SELECT id, codigo, ruc, razon_social, nombre_comercial, telefono, celular, email,
              direccion, ciudad, provincia, persona_contacto, telefono_contacto,
              estado, created_at, updated_at 
       FROM proveedores 
       WHERE id = ?`,[R.insertId]);return m.NextResponse.json(E[0],{status:201})}catch(e){return console.error("Error al crear proveedor:",e),m.NextResponse.json({error:e.message||"Error al crear proveedor"},{status:500})}}async function _(e){try{let t=await e.json(),{id:r,codigo:o,ruc:a,razonSocial:n,nombreComercial:s,telefono:i,celular:l,email:d,direccion:u,ciudad:c,provincia:p,personaContacto:R,telefonoContacto:E}=t;if(s=s||null,l=l||null,d=d||null,u=u||null,c=c||null,p=p||null,R=R||null,E=E||null,!r||!a||!n||!i)return m.NextResponse.json({error:"ID, RUC, razón social y teléfono son obligatorios"},{status:400});if((await (0,g.query)("SELECT id FROM proveedores WHERE ruc = ? AND id != ?",[a,r])).length>0)return m.NextResponse.json({error:"Ya existe otro proveedor con este RUC"},{status:400});let v=o;if(!o){let e=await (0,g.query)("SELECT codigo FROM proveedores WHERE id = ?",[r]);e.length>0&&(v=e[0].codigo)}await (0,g.query)(`UPDATE proveedores SET
        codigo = ?,
        ruc = ?,
        razon_social = ?,
        nombre_comercial = ?,
        telefono = ?,
        celular = ?,
        email = ?,
        direccion = ?,
        ciudad = ?,
        provincia = ?,
        persona_contacto = ?,
        telefono_contacto = ?,
        estado = ?
       WHERE id = ?`,[v,a,n,s,i,l,d,u,c,p,R,E,t.estado||"activo",r]);let x=await (0,g.query)(`SELECT id, codigo, ruc, razon_social, nombre_comercial, telefono, celular, email,
              direccion, ciudad, provincia, persona_contacto, telefono_contacto,
              estado, created_at, updated_at 
       FROM proveedores 
       WHERE id = ?`,[r]);return m.NextResponse.json(x[0])}catch(e){return console.error("Error al actualizar proveedor:",e),m.NextResponse.json({error:e.message||"Error al actualizar proveedor"},{status:500})}}async function C(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return m.NextResponse.json({error:"ID del proveedor es requerido"},{status:400});let o=await (0,g.query)("SELECT id FROM proveedores WHERE id = ?",[r]);if(0===o.length)return m.NextResponse.json({error:"Proveedor no encontrado"},{status:404});return await (0,g.query)("DELETE FROM proveedores WHERE id = ?",[r]),m.NextResponse.json({message:"Proveedor eliminado exitosamente"})}catch(e){if(console.error("Error al eliminar proveedor:",e),e.message?.includes("foreign key")||"ER_ROW_IS_REFERENCED_2"===e.code)return m.NextResponse.json({error:"No se puede eliminar el proveedor porque tiene productos o pedidos asociados"},{status:400});return m.NextResponse.json({error:e.message||"Error al eliminar proveedor"},{status:500})}}e.s(["DELETE",()=>C,"GET",()=>y,"POST",()=>w,"PUT",()=>_],46898);var N=e.i(46898);let T=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/proveedores/route",pathname:"/api/proveedores",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/proveedores/route.ts",nextConfigOutput:"",userland:N}),{workAsyncStorage:b,workUnitAsyncStorage:A,serverHooks:j}=T;function q(){return(0,o.patchFetch)({workAsyncStorage:b,workUnitAsyncStorage:A})}async function O(e,t,o){T.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let m="/api/proveedores/route";m=m.replace(/\/index$/,"")||"/";let g=await T.prepare(e,t,{srcPage:m,multiZoneDraftMode:!1});if(!g)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:y,params:w,nextConfig:_,parsedUrl:C,isDraftMode:N,prerenderManifest:b,routerServerContext:A,isOnDemandRevalidate:j,revalidateOnlyGenerated:q,resolvedPathname:O,clientReferenceManifest:S,serverActionsManifest:P}=g,H=(0,l.normalizeAppPath)(m),M=!!(b.dynamicRoutes[H]||b.routes[O]),U=async()=>((null==A?void 0:A.render404)?await A.render404(e,t,C,!1):t.end("This page could not be found"),null);if(M&&!N){let e=!!b.routes[O],t=b.dynamicRoutes[H];if(t&&!1===t.fallback&&!e){if(_.experimental.adapterPath)return await U();throw new h.NoFallbackError}}let k=null;!M||T.isDev||N||(k="/index"===(k=O)?"/":k);let D=!0===T.isDev||!M,I=M&&!D;P&&S&&(0,s.setReferenceManifestsSingleton)({page:m,clientReferenceManifest:S,serverActionsManifest:P,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:P})});let F=e.method||"GET",L=(0,n.getTracer)(),z=L.getActiveScopeSpan(),W={params:w,prerenderManifest:b,renderOpts:{experimental:{authInterrupts:!!_.experimental.authInterrupts},cacheComponents:!!_.cacheComponents,supportsDynamicResponse:D,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:_.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,o)=>T.onRequestError(e,t,o,A)},sharedContext:{buildId:y}},$=new d.NodeNextRequest(e),K=new d.NodeNextResponse(t),B=u.NextRequestAdapter.fromNodeNextRequest($,(0,u.signalFromNodeResponse)(t));try{let s=async e=>T.handle(B,W).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=L.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${F} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${F} ${m}`)}),i=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var n,l;let d=async({previousCacheEntry:r})=>{try{if(!i&&j&&q&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await s(a);e.fetchMetrics=W.renderOpts.fetchMetrics;let l=W.renderOpts.pendingWaitUntil;l&&o.waitUntil&&(o.waitUntil(l),l=void 0);let d=W.renderOpts.collectedTags;if(!M)return await (0,R.sendResponse)($,K,n,W.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,E.toNodeOutgoingHttpHeaders)(n.headers);d&&(t[x.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==W.renderOpts.collectedRevalidate&&!(W.renderOpts.collectedRevalidate>=x.INFINITE_CACHE)&&W.renderOpts.collectedRevalidate,o=void 0===W.renderOpts.collectedExpire||W.renderOpts.collectedExpire>=x.INFINITE_CACHE?void 0:W.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==r?void 0:r.isStale)&&await T.onRequestError(e,t,{routerKind:"App Router",routePath:m,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:I,isOnDemandRevalidate:j})},A),t}},u=await T.handleResponse({req:e,nextConfig:_,cacheKey:k,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:j,revalidateOnlyGenerated:q,responseGenerator:d,waitUntil:o.waitUntil,isMinimalMode:i});if(!M)return null;if((null==u||null==(n=u.value)?void 0:n.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",j?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),N&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let c=(0,E.fromNodeOutgoingHttpHeaders)(u.value.headers);return i&&M||c.delete(x.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||c.get("Cache-Control")||c.set("Cache-Control",(0,v.getCacheControlHeader)(u.cacheControl)),await (0,R.sendResponse)($,K,new Response(u.value.body,{headers:c,status:u.value.status||200})),null};z?await l(z):await L.withPropagatedContext(e.headers,()=>L.trace(c.BaseServerSpan.handleRequest,{spanName:`${F} ${m}`,kind:n.SpanKind.SERVER,attributes:{"http.method":F,"http.target":e.url}},l))}catch(t){if(t instanceof h.NoFallbackError||await T.onRequestError(e,t,{routerKind:"App Router",routePath:H,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:I,isOnDemandRevalidate:j})}),M)throw t;return await (0,R.sendResponse)($,K,new Response(null,{status:500})),null}}e.s(["handler",()=>O,"patchFetch",()=>q,"routeModule",()=>T,"serverHooks",()=>j,"workAsyncStorage",()=>b,"workUnitAsyncStorage",()=>A],39871)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5b17ab2a._.js.map